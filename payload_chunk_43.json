[{"path": "_backup_v2_pyqt/macos_widgets.py", "content": "#!/usr/bin/env python3\n# -*- coding: utf-8 -*-\n\"\"\"\nmacOSé£æ ¼çª—å£ç»„ä»¶\nåŒ…å«æ ‡é¢˜æ ã€èœå•æ ç­‰macOSç‰¹æœ‰å…ƒç´ \n\"\"\"\n\nfrom PyQt6.QtWidgets import (QWidget, QVBoxLayout, QHBoxLayout, QLabel, \n                             QPushButton, QFrame, QMenu)\nfrom PyQt6.QtCore import Qt, pyqtSignal\nfrom PyQt6.QtGui import QLinearGradient, QPalette, QPainter, QColor\nfrom design_system import Colors, Spacing, Typography\n\nclass MacTitleBar(QWidget):\n    \"\"\"macOSæ ‡é¢˜æ  - å¸¦æ¸å˜å’Œçº¢ç»¿ç¯æŒ‰é’®\"\"\"\n    closeClicked = pyqtSignal()\n    minimizeClicked = pyqtSignal()\n    maximizeClicked = pyqtSignal()\n    \n    def __init__(self, title=\"\", version=\"\", parent=None):\n        super().__init__(parent)\n        self.setFixedHeight(Spacing.TITLEBAR_HEIGHT)\n        self.setup_ui(title, version)\n        \n    def setup_ui(self, title, version):\n        c = Colors.Light\n        layout = QHBoxLayout(self)\n        layout.setContentsMargins(16, 0, 16, 0)\n        layout.setSpacing(0)\n        \n        # çº¢ç»¿ç¯æŒ‰é’®ç»„\n        traffic_lights = QWidget()\n        traffic_layout = QHBoxLayout(traffic_lights)\n        traffic_layout.setContentsMargins(0, 0, 0, 0)\n        traffic_layout.setSpacing(8)\n        \n        # çº¢è‰²æŒ‰é’®\n        red_btn = QPushButton()\n        red_btn.setFixedSize(12, 12)\n        red_btn.setStyleSheet(f\"\"\"\n            QPushButton {{\n                background-color: {c.TRAFFIC_RED.name()};\n                border: 1px solid {c.TRAFFIC_RED_BORDER.name()};\n                border-radius: 6px;\n            }}\n            QPushButton:hover {{\n                filter: brightness(0.9);\n            }}\n        \"\"\")\n        red_btn.clicked.connect(self.closeClicked.emit)\n        traffic_layout.addWidget(red_btn)\n        \n        # é»„è‰²æŒ‰é’®\n        yellow_btn = QPushButton()\n        yellow_btn.setFixedSize(12, 12)\n        yellow_btn.setStyleSheet(f\"\"\"\n            QPushButton {{\n                background-color: {c.TRAFFIC_YELLOW.name()};\n                border: 1px solid {c.TRAFFIC_YELLOW_BORDER.name()};\n                border-radius: 6px;\n            }}\n            QPushButton:hover {{\n                filter: brightness(0.9);\n            }}\n        \"\"\")\n        yellow_btn.clicked.connect(self.minimizeClicked.emit)\n        traffic_layout.addWidget(yellow_btn)\n        \n        # ç»¿è‰²æŒ‰é’®\n        green_btn = QPushButton()\n        green_btn.setFixedSize(12, 12)\n        green_btn.setStyleSheet(f\"\"\"\n            QPushButton {{\n                background-color: {c.TRAFFIC_GREEN.name()};\n                border: 1px solid {c.TRAFFIC_GREEN_BORDER.name()};\n                border-radius: 6px;\n            }}\n            QPushButton:hover {{\n                filter: brightness(0.9);\n            }}\n        \"\"\")\n        green_btn.clicked.connect(self.maximizeClicked.emit)\n        traffic_layout.addWidget(green_btn)\n        \n        layout.addWidget(traffic_lights)\n        layout.addStretch()\n        \n        # æ ‡é¢˜ï¼ˆå±…ä¸­ï¼‰\n        title_container = QWidget()\n        title_layout = QHBoxLayout(title_container)\n        title_layout.setContentsMargins(0, 0, 0, 0)\n        title_layout.setSpacing(8)\n        \n        title_label = QLabel(title)\n        title_label.setStyleSheet(f\"\"\"\n            color: {c.TEXT_TITLE.name()};\n            font-size: 13px;\n            font-weight: 500;\n            background-color: transparent;\n        \"\"\")\n        title_layout.addWidget(title_label)\n        \n        version_label = QLabel(version)\n        version_label.setStyleSheet(f\"\"\"\n            color: {c.TEXT_VERSION.name()};\n            font-size: 11px;\n            background-color: transparent;\n        \"\"\")\n        title_layout.addWidget(version_label)\n        \n        layout.addWidget(title_container)\n        layout.addStretch()\n        \n    def paintEvent(self, event):\n        \"\"\"ç»˜åˆ¶æ¸å˜èƒŒæ™¯\"\"\"\n        painter = QPainter(self)\n        painter.setRenderHint(QPainter.RenderHint.Antialiasing)\n        \n        gradient = QLinearGradient(0, 0, 0, self.height())\n        gradient.setColorAt(0, Colors.Light.BG_TITLEBAR_TOP)\n        gradient.setColorAt(1, Colors.Light.BG_TITLEBAR_BOTTOM)\n        \n        painter.fillRect(self.rect(), gradient)\n        \n        # åº•éƒ¨è¾¹æ¡†\n        painter.setPen(Colors.Light.BORDER_MENUBAR)\n        painter.drawLine(0, self.height()-1, self.width(), self.height()-1)\n\nclass MacMenuBar(QWidget):\n    \"\"\"macOSèœå•æ \"\"\"\n    def __init__(self, parent=None):\n        super().__init__(parent)\n        self.setFixedHeight(Spacing.MENUBAR_HEIGHT)\n        self.setup_ui()\n        \n    def setup_ui(self):\n        c = Colors.Light\n        layout = QHBoxLayout(self)\n        layout.setContentsMargins(12, 0, 12, 0)\n        layout.setSpacing(0)\n        \n        # å ä½ç¬¦å°†èœå•æ¨åˆ°å³ä¾§\n        layout.addStretch()\n        \n        # èœå•é¡¹\n        menu_items = [\n            (\"OpenWrt Manager\", True),  # (åç§°, æ˜¯å¦ç²—ä½“)\n            (\"æ–‡ä»¶\", False),\n            (\"ç¼–è¾‘\", False),\n            (\"è§†å›¾\", False),\n            (\"æ‰«æ\", False),\n            (\"çª—å£\", False),\n            (\"å¸®åŠ©\", False),\n        ]\n        \n        for menu_name, is_bold in menu_items:\n            btn = QPushButton(menu_name)\n            # æ·»åŠ èœå• (å³ä½¿æ˜¯ç©ºçš„ï¼Œä¸ºäº†è§†è§‰æ•ˆæœ)\n            menu = QMenu(self)\n            if menu_name == \"æ–‡ä»¶\":\n                 menu.addAction(\"æ–°å»º\")\n                 menu.addAction(\"æ‰“å¼€...\")\n                 menu.addSeparator()\n                 menu.addAction(\"å¯¼å‡º\")\n            elif menu_name == \"ç¼–è¾‘\":\n                 menu.addAction(\"æ’¤é”€\")\n                 menu.addAction(\"é‡åš\")\n                 menu.addSeparator()\n                 menu.addAction(\"å‰ªåˆ‡\")\n                 menu.addAction(\"å¤åˆ¶\")\n                 menu.addAction(\"ç²˜è´´\")\n            else:\n                 menu.addAction(\"ç¤ºä¾‹é€‰é¡¹ 1\")\n                 menu.addAction(\"ç¤ºä¾‹é€‰é¡¹ 2\")\n            \n            btn.setMenu(menu)\n            \n            if is_bold:\n                btn.setStyleSheet(f\"\"\"\n                    QPushButton {{\n                        background-color: transparent;\n                        color: {c.TEXT_PRIMARY.name()};\n                        border: none;\n                        border-radius: 4px;\n                        padding: 2px 10px;\n                        font-family: {Typography.FONT_FAMILY_SANS};\n                        font-size: 13px;\n                        font-weight: 600;\n                    }}\n                    QPushButton:hover {{\n                        background-color: rgba(0,0,0,0.05);\n                    }}\n                    QPushButton::menu-indicator {{ width: 0px; }}\n                \"\"\")\n            else:\n                btn.setStyleSheet(f\"\"\"\n                    QPushButton {{\n                        background-color: transparent;\n                        color: {c.TEXT_PRIMARY.name()};\n                        border: none;\n                        border-radius: 4px;\n                        padding: 2px 10px;\n                        font-family: {Typography.FONT_FAMILY_SANS};\n                        font-size: 13px;\n                    }}\n                    QPushButton:hover {{\n                        background-color: rgba(0,0,0,0.05);\n                    }}\n                    QPushButton::menu-indicator {{ width: 0px; }}\n                \"\"\")\n            layout.addWidget(btn)\n        \n        # ç§»é™¤æ—¶é—´æ˜¾ç¤º\n        # time_label = QLabel(\"15:00\")\n        \n    def paintEvent(self, event):\n        \"\"\"ç»˜åˆ¶æ¸å˜èƒŒæ™¯\"\"\"\n        painter = QPainter(self)\n        painter.setRenderHint(QPainter.RenderHint.Antialiasing)\n        \n        gradient = QLinearGradient(0, 0, 0, self.height())\n        gradient.setColorAt(0, Colors.Light.BG_MENUBAR_TOP)\n        gradient.setColorAt(1, Colors.Light.BG_MENUBAR_BOTTOM)\n        \n        painter.fillRect(self.rect(), gradient)\n        \n        # åº•éƒ¨è¾¹æ¡†\n        painter.setPen(Colors.Light.BORDER_PRIMARY)\n        painter.drawLine(0, self.height()-1, self.width(), self.height()-1)\n\nclass MacWindow(QWidget):\n    \"\"\"macOSé£æ ¼çš„çª—å£å®¹å™¨ - å¸¦åœ†è§’è¾¹æ¡†\"\"\"\n    def __init__(self, parent=None):\n        super().__init__(parent)\n        self.setStyleSheet(f\"\"\"\n            MacWindow {{\n                background-color: {Colors.Light.BG_SECONDARY.name()};\n                border: 1px solid {Colors.Light.BORDER_PRIMARY.name()};\n                border-radius: 10px;\n            }}\n        \"\"\")\n"}, {"path": "_backup_v2_pyqt/openwrt_manager.py", "content": "#!/usr/bin/env python3\n# -*- coding: utf-8 -*-\n\"\"\"\nOpenWrt æ‰¹é‡èµ„äº§ç®¡ç†åŠ©æ‰‹\nA desktop tool for batch login detection of OpenWrt devices\n\"\"\"\n\nimport sys\nimport asyncio\nimport csv\nfrom typing import List, Dict, Tuple, Optional\nfrom datetime import datetime\n\nimport aiohttp\nfrom PyQt6.QtWidgets import (\n    QApplication, QMainWindow, QWidget, QSplitter, QVBoxLayout, QHBoxLayout,\n    QPlainTextEdit, QSpinBox, QPushButton, QTableWidget, QTableWidgetItem,\n    QLabel, QFileDialog, QMessageBox, QHeaderView, QMenu, QFrame, QSizePolicy\n)\nfrom PyQt6.QtCore import Qt, QTimer, pyqtSignal, QObject, QPropertyAnimation, QEasingCurve\nfrom PyQt6.QtGui import QPalette, QColor, QPainter, QAction\nimport qasync\n\n# å¯¼å…¥è®¾è®¡ç³»ç»Ÿå’Œ UI ç»„ä»¶\nfrom design_system import theme, Colors, Typography, BorderRadius, Spacing\nfrom ui_components import (\n    ApplePrimaryButton, AppleSecondaryButton, AppleDestructiveButton,\n    StatusBadge, AppleCard, SectionHeader, StatsCard, CircularProgress,\n    AppleSmallButton\n)\nfrom macos_widgets import MacTitleBar, MacMenuBar, MacWindow\n\n\n# ============================================================================\n# å‡­è¯é…ç½® - è¯·åœ¨æ­¤å¤„ä¿®æ”¹ç™»å½•å‡­è¯ç»„åˆ\n# ============================================================================\nCREDENTIALS_LIST = [\n    {\"username\": \"root\", \"password\": \"password\"},  # é»˜è®¤ä¼˜å…ˆ\n    {\"username\": \"root\", \"password\": \"admin\"},\n    {\"username\": \"admin\", \"password\": \"admin\"},\n    {\"username\": \"ubnt\", \"password\": \"ubnt\"},\n    {\"username\": \"root\", \"password\": \"123456\"},\n]\n\n# ============================================================================\n# å¤šç‰ˆæœ¬å…¼å®¹é…ç½® - æ”¯æŒä¸åŒçš„ OpenWrt å˜ä½“\n# ============================================================================\n\n# å¸¸è§çš„ç™»å½•è·¯å¾„ï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åºï¼‰\nLOGIN_PATHS = [\n    \"/cgi-bin/luci\",           # æ ‡å‡† LuCI (OpenWrt å®˜æ–¹)\n    \"/cgi-bin/luci/admin\",     # éƒ¨åˆ†å®šåˆ¶ç‰ˆæœ¬\n    \"/login\",                  # ç®€åŒ–è·¯å¾„\n]\n\n# è¡¨å•å­—æ®µåå˜ä½“ï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åºï¼‰\nFIELD_NAME_VARIANTS = [\n    {\"username\": \"luci_username\", \"password\": \"luci_password\"},  # æ ‡å‡† LuCI\n    {\"username\": \"username\", \"password\": \"password\"},            # ç®€åŒ–ç‰ˆ (PandoraBoxç­‰)\n    {\"username\": \"auth_username\", \"password\": \"auth_password\"},  # è®¤è¯ç‰ˆ\n]\n\n\n# ============================================================================\n# å‘¼å¸ç¯ç»„ä»¶\n# ============================================================================\nclass BreathingLight(QWidget):\n    \"\"\"å‘¼å¸ç¯åŠ¨ç”»ç»„ä»¶\"\"\"\n    \n    def __init__(self, parent=None):\n        super().__init__(parent)\n        self.setFixedSize(20, 20)\n        self._opacity = 0.3\n        self._is_active = False\n        self._color = QColor(128, 128, 128)  # é»˜è®¤ç°è‰²\n        \n        # åŠ¨ç”»\n        self._animation = QPropertyAnimation(self, b\"opacity\")\n        self._animation.setDuration(1500)  # 1.5ç§’ä¸€ä¸ªå‘¨æœŸ\n        self._animation.setStartValue(0.3)\n        self._animation.setEndValue(1.0)\n        self._animation.setEasingCurve(QEasingCurve.Type.InOutQuad)\n        self._animation.setLoopCount(-1)  # æ— é™å¾ªç¯\n        \n    def paintEvent(self, event):\n        \"\"\"ç»˜åˆ¶åœ†å½¢å‘¼å¸ç¯\"\"\"\n        painter = QPainter(self)\n        painter.setRenderHint(QPainter.RenderHint.Antialiasing)\n        \n        # è®¾ç½®é¢œè‰²å’Œé€æ˜åº¦\n        color = QColor(self._color)\n        color.setAlphaF(self._opacity)\n        painter.setBrush(color)\n        painter.setPen(Qt.PenStyle.NoPen)\n        \n        # ç»˜åˆ¶åœ†å½¢\n        painter.drawEllipse(0, 0, self.width(), self.height())\n        \n    def set_active(self, active: bool):\n        \"\"\"è®¾ç½®æ¿€æ´»çŠ¶æ€\"\"\"\n        self._is_active = active\n        if active:\n            self._color = QColor(0, 255, 0)  # ç»¿è‰²\n            self._animation.start()\n        else:\n            self._color = QColor(128, 128, 128)  # ç°è‰²\n            self._animation.stop()\n            self._opacity = 0.3\n        self.update()\n        \n    def get_opacity(self):\n        return self._opacity\n    \n    def set_opacity(self, value):\n        self._opacity = value\n        self.update()\n        \n    opacity = property(get_opacity, set_opacity)\n\n\n# ============================================================================\n# ä¿¡å·æ¡¥æ¥å™¨ï¼ˆç”¨äºçº¿ç¨‹å®‰å…¨çš„UIæ›´æ–°ï¼‰\n# ============================================================================\nclass SignalBridge(QObject):\n    \"\"\"ä¿¡å·æ¡¥æ¥å™¨ï¼Œç”¨äºä»å¼‚æ­¥å‡½æ•°å®‰å…¨åœ°æ›´æ–°UI\"\"\"\n    update_row = pyqtSignal(int, str, str, str, str)  # row, status, user, password, notes\n    task_finished = pyqtSignal()\n\n\n# ============================================================================\n# å¼‚æ­¥ç™»å½•ç®¡ç†å™¨\n# ============================================================================\nclass LoginManager:\n    \"\"\"OpenWrt ç™»å½•æ¢æµ‹ç®¡ç†å™¨\"\"\"\n    \n    def __init__(self, max_concurrent: int = 50):\n        self.max_concurrent = max_concurrent\n        self.semaphore = asyncio.Semaphore(max_concurrent)\n        self.signal_bridge = SignalBridge()\n        self._tasks = []\n        self._is_running = False\n        \n    async def detect_login(self, row: int, target_url: str) -> Dict:\n        \"\"\"\n        æ¢æµ‹å•ä¸ª OpenWrt è®¾å¤‡çš„ç™»å½•\n        æ”¯æŒå¤šç§ OpenWrt å˜ä½“ï¼ˆæ ‡å‡† LuCI, PandoraBox, iStoreOS ç­‰ï¼‰\n        \n        Args:\n            row: è¡¨æ ¼è¡Œå·\n            target_url: ç›®æ ‡ URL\n            \n        Returns:\n            æ£€æµ‹ç»“æœå­—å…¸\n        \"\"\"\n        async with self.semaphore:\n            # å¦‚æœåœæ­¢ï¼Œç›´æ¥è¿”å›\n            if not self._is_running:\n                return {\"status\": \"å·²åœæ­¢\", \"user\": \"\", \"password\": \"\", \"notes\": \"ç”¨æˆ·ä¸­æ­¢\"}\n            \n            # è§„èŒƒåŒ– URL\n            if not target_url.startswith((\"http://\", \"https://\")):\n                target_url = f\"http://{target_url}\"\n            \n            # é…ç½®è¶…æ—¶\n            timeout = aiohttp.ClientTimeout(total=10)  # å¢åŠ åˆ°10ç§’ä»¥é€‚åº”æ›´å¤šè®¾å¤‡\n            \n            try:\n                async with aiohttp.ClientSession(timeout=timeout) as session:\n                    # ğŸ”„ éå†ä¸åŒçš„ç™»å½•è·¯å¾„ï¼ˆæ”¯æŒå¤šç§OpenWrtå˜ä½“ï¼‰\n                    for login_path in LOGIN_PATHS:\n                        if not self._is_running:\n                            break\n                        \n                        login_url = f\"{target_url.rstrip('/')}{login_path}\"\n                        \n                        # ğŸ†• æ­¥éª¤1: å…ˆè®¿é—®ç™»å½•é¡µé¢ï¼Œåˆå§‹åŒ– Session å’Œè·å– Cookie\n                        try:\n                            async with session.get(\n                                login_url,\n                                ssl=False,\n                                allow_redirects=True\n                            ) as init_response:\n                                if init_response.status not in [200, 401, 403]:\n                                    # æ­¤è·¯å¾„ä¸å¯ç”¨ï¼Œå°è¯•ä¸‹ä¸€ä¸ª\n                                    continue\n                                await init_response.read()\n                        except Exception:\n                            # æ­¤è·¯å¾„å¤±è´¥ï¼Œå°è¯•ä¸‹ä¸€ä¸ª\n                            continue\n                        \n                        # ğŸ†• æ­¥éª¤2: å°è¯•ä¸åŒçš„å‡­è¯ç»„åˆ\n                        for cred in CREDENTIALS_LIST:\n                            if not self._is_running:\n                                break\n                                \n                            username = cred[\"username\"]\n                            password = cred[\"password\"]\n                            \n                            # ğŸ†• æ­¥éª¤3: å°è¯•ä¸åŒçš„å­—æ®µåå˜ä½“\n                            for field_variant in FIELD_NAME_VARIANTS:\n                                if not self._is_running:\n                                    break\n                                \n                                # æ›´æ–°çŠ¶æ€\n                                self.signal_bridge.update_row.emit(\n                                    row,\n                                    f\"å°è¯• {username}/***\",\n                                    \"\",\n                                    \"\",\n                                    f\"è·¯å¾„:{login_path}\"\n                                )\n                                \n                                try:\n                                    # æ„å»ºè¡¨å•æ•°æ®\n                                    data = {\n                                        field_variant[\"username\"]: username,\n                                        field_variant[\"password\"]: password\n                                    }\n                                    \n                                    # å‘é€ POST ç™»å½•è¯·æ±‚\n                                    async with session.post(\n                                        login_url,\n                                        data=data,\n                                        ssl=False,\n                                        allow_redirects=False\n                                    ) as response:\n                                        # æ£€æŸ¥æ˜¯å¦ç™»å½•æˆåŠŸ\n                                        cookies = response.cookies\n                                        has_sysauth = any('sysauth' in str(cookie.key) for cookie in cookies.values())\n                                        is_redirect = response.status in [302, 303]\n                                        \n                                        if has_sysauth or is_redirect:\n                                            # ğŸ‰ ç™»å½•æˆåŠŸï¼\n                                            self.signal_bridge.update_row.emit(\n                                                row,\n                                                \"ç™»å½•æˆåŠŸ\",\n                                                username,\n                                                password,\n                                                f\"{login_path} | {field_variant['username']}\"\n                                            )\n                                            return {\n                                                \"status\": \"ç™»å½•æˆåŠŸ\",\n                                                \"user\": username,\n                                                \"password\": password,\n                                                \"notes\": f\"{login_path} | {field_variant['username']}\"\n                                            }\n                                        \n                                        # å¦‚æœä¸æ˜¯404æˆ–500é”™è¯¯ï¼Œè¯´æ˜è·¯å¾„æ­£ç¡®ä½†å¯†ç é”™è¯¯\n                                        # ç»§ç»­å°è¯•ä¸‹ä¸€ä¸ªå‡­è¯ï¼Œä¸å†å°è¯•å…¶ä»–å­—æ®µåå˜ä½“\n                                        if response.status not in [404, 500]:\n                                            break\n                                \n                                except asyncio.TimeoutError:\n                                    continue\n                                except aiohttp.ClientConnectorError:\n                                    # è¿æ¥é”™è¯¯ï¼Œä¸å†å°è¯•å…¶ä»–è·¯å¾„å’Œå‡­è¯\n                                    self.signal_bridge.update_row.emit(\n                                        row,\n                                        \"æ— æ³•è¿æ¥\",\n                                        \"\",\n                                        \"\",\n                                        \"ç½‘ç»œä¸é€šæˆ–ç«¯å£æœªå¼€æ”¾\"\n                                    )\n                                    return {\n                                        \"status\": \"æ— æ³•è¿æ¥\",\n                                        \"user\": \"\",\n                                        \"password\": \"\",\n                                        \"notes\": \"ç½‘ç»œä¸é€šæˆ–ç«¯å£æœªå¼€æ”¾\"\n                                    }\n                                except Exception:\n                                    # å…¶ä»–é”™è¯¯ï¼Œå°è¯•ä¸‹ä¸€ä¸ªå­—æ®µåå˜ä½“\n                                    continue\n                    \n                    # æ‰€æœ‰å‡­è¯éƒ½å¤±è´¥\n                    self.signal_bridge.update_row.emit(\n                        row,\n                        \"ç™»å½•å¤±è´¥\",\n                        \"\",\n                        \"\",\n                        \"æ‰€æœ‰å‡­è¯å‡æ— æ•ˆ\"\n                    )\n                    return {\n                        \"status\": \"ç™»å½•å¤±è´¥\",\n                        \"user\": \"\",\n                        \"password\": \"\",\n                        \"notes\": \"æ‰€æœ‰å‡­è¯å‡æ— æ•ˆ\"\n                    }\n                    \n            except asyncio.TimeoutError:\n                self.signal_bridge.update_row.emit(\n                    row,\n                    \"è¿æ¥è¶…æ—¶\",\n                    \"\",\n                    \"\",\n                    \"è¯·æ±‚è¶…æ—¶ï¼ˆ8ç§’ï¼‰\"\n                )\n                return {\n                    \"status\": \"è¿æ¥è¶…æ—¶\",\n                    \"user\": \"\",\n                    \"password\": \"\",\n                    \"notes\": \"è¯·æ±‚è¶…æ—¶ï¼ˆ8ç§’ï¼‰\"\n                }\n            except Exception as e:\n                self.signal_bridge.update_row.emit(\n                    row,\n                    \"æ£€æµ‹å¼‚å¸¸\",\n                    \"\",\n                    \"\",\n                    str(e)[:50]\n                )\n                return {\n                    \"status\": \"æ£€æµ‹å¼‚å¸¸\",\n                    \"user\": \"\",\n                    \"password\": \"\",\n                    \"notes\": str(e)[:50]\n                }\n                \n    async def batch_detect(self, targets: List[str]):\n        \"\"\"æ‰¹é‡æ¢æµ‹\"\"\"\n        self._is_running = True\n        self._tasks = []\n        \n        # åˆ›å»ºæ‰€æœ‰ä»»åŠ¡\n        for idx, target in enumerate(targets):\n            task = asyncio.create_task(self.detect_login(idx, target))\n            self._tasks.append(task)\n        \n        # ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ\n        await asyncio.gather(*self._tasks, return_exceptions=True)\n        \n        # å‘é€å®Œæˆä¿¡å·\n        self.signal_bridge.task_finished.emit()\n        \n    def stop(self):\n        \"\"\"åœæ­¢æ‰€æœ‰ä»»åŠ¡\"\"\"\n        self._is_running = False\n        for task in self._tasks:\n            if not task.done():\n                task.cancel()\n\n\n# ============================================================================\n# ä¸»çª—å£\n# ============================================================================\nclass MainWindow(QMainWindow):\n    \"\"\"ä¸»çª—å£\"\"\"\n    \n    def __init__(self):\n        super().__init__()\n        self.login_manager = LoginManager(max_concurrent=50)\n        self.init_ui()\n        self.connect_signals()\n        \n    def init_ui(self):\n        \"\"\"åˆå§‹åŒ–UI - v0.appå®Œæ•´å¤åˆ»\"\"\"\n        self.setWindowTitle(\"OpenWrt Manager v2.0\")\n        self.setGeometry(100, 100, 1200, 800)\n        self.setWindowFlags(Qt.WindowType.FramelessWindowHint)  # æ— è¾¹æ¡†çª—å£\n        self.setAttribute(Qt.WidgetAttribute.WA_TranslucentBackground) # é€æ˜èƒŒæ™¯\n        \n        # === ä¸»å®¹å™¨ï¼ˆå¸¦åœ†è§’è¾¹æ¡†çš„å¤–æ¡†ï¼‰===\n        central_widget = QWidget()\n        self.setCentralWidget(central_widget)\n        \n        # ä¸»å¸ƒå±€ - ç•™å‡ºé˜´å½±ç©ºé—´\n        main_container = QVBoxLayout(central_widget)\n        main_container.setContentsMargins(20, 20, 20, 20)\n        main_container.setSpacing(0)\n        \n        # === macOSçª—å£å®¹å™¨ ===\n        self.mac_window = MacWindow()\n        \n        # çª—å£å†…éƒ¨å¸ƒå±€\n        window_layout = QVBoxLayout(self.mac_window)\n        window_layout.setContentsMargins(0, 0, 0, 0)\n        window_layout.setSpacing(0)\n        \n        # === 1. æ ‡é¢˜æ ï¼ˆ52pxï¼Œå¸¦çº¢ç»¿ç¯ï¼‰===\n        titlebar = MacTitleBar(\"OpenWrt Manager\", \"v2.0\")\n        titlebar.closeClicked.connect(self.close)\n        titlebar.minimizeClicked.connect(self.showMinimized)\n        titlebar.maximizeClicked.connect(self.toggle_maximize)\n        \n        # å®ç°æ ‡é¢˜æ æ‹–æ‹½\n        def mousePressEvent(event):\n            if event.button() == Qt.MouseButton.LeftButton:\n                self.dragPosition = event.globalPosition().toPoint() - self.frameGeometry().topLeft()\n                event.accept()\n        \n        def mouseMoveEvent(event):\n            if event.buttons() == Qt.MouseButton.LeftButton:\n                self.move(event.globalPosition().toPoint() - self.dragPosition)\n                event.accept()\n                \n        titlebar.mousePressEvent = mousePressEvent\n        titlebar.mouseMoveEvent = mouseMoveEvent\n        \n        window_layout.addWidget(titlebar)\n        \n        # === 2. èœå•æ ï¼ˆ28pxï¼‰===\n        menubar = MacMenuBar()\n        window_layout.addWidget(menubar)\n        \n        # === 3. ä¸»å†…å®¹åŒºï¼ˆå·¦å³åˆ†æ ï¼‰===\n        content_splitter = QSplitter(Qt.Orientation.Horizontal)\n        content_splitter.setHandleWidth(1)\n        content_splitter.setStyleSheet(f\"\"\"\n            QSplitter::handle {{\n                background-color: {Colors.Light.BORDER_SECONDARY.name()};\n            }}\n        \"\"\")\n        \n        # ==== 3.1 å·¦ä¾§è¾¹æ ï¼ˆ280pxï¼Œç°è‰²èƒŒæ™¯ï¼‰====\n        sidebar = QWidget()\n        sidebar.setFixedWidth(Spacing.SIDEBAR_WIDTH)\n        sidebar.setStyleSheet(f\"\"\"\n            QWidget {{\n                background-color: #f5f5f7;\n                border-right: 1px solid #d1d1d6;\n            }}\n            /* ç¡®ä¿å†…éƒ¨æ§ä»¶èƒŒæ™¯é€æ˜æˆ–æ­£ç¡® */\n            QPlainTextEdit {{\n                background-color: white;\n                border: 1px solid #c7c7c7;\n                border-radius: 6px;\n                padding: 8px;\n                color: #1d1d1f;\n            }}\n        \"\"\")\n        \n        sidebar_layout = QVBoxLayout(sidebar)\n        sidebar_layout.setContentsMargins(16, 16, 16, 16)\n        sidebar_layout.setSpacing(16)\n        \n        # ç›®æ ‡è¾“å…¥\n        sidebar_layout.addWidget(SectionHeader(\"ç›®æ ‡\"))\n        self.url_input = QPlainTextEdit()\n        self.url_input.setPlaceholderText(\"è¾“å…¥ IP åœ°å€ï¼Œæ¯è¡Œä¸€ä¸ª...\")\n        self.url_input.setMinimumHeight(150)\n        sidebar_layout.addWidget(self.url_input)\n        \n        # å¹¶å‘è®¾ç½®\n        sidebar_layout.addWidget(SectionHeader(\"è®¾ç½®\"))\n        settings_row = QHBoxLayout()\n        settings_row.setSpacing(10)\n        \n        # å¹¶å‘æ•°è®¾ç½® (ä¸‹æ‹‰èœå•é£æ ¼)\n        self.concurrent_btn = AppleSecondaryButton(\"å¹¶å‘ 50 âŒ„\")\n        self.concurrent_btn.setFixedHeight(36)\n        self.concurrent_btn.setSizePolicy(QSizePolicy.Policy.Expanding, QSizePolicy.Policy.Fixed)\n        \n        # å¹¶å‘èœå•\n        concurrent_menu = QMenu(self)\n        concurrent_menu.setStyleSheet(f\"\"\"\n            QMenu {{\n                background-color: white;\n                border: 1px solid {Colors.Light.BORDER_PRIMARY.name()};\n                border-radius: 6px;\n                padding: 4px;\n            }}\n            QMenu::item {{\n                padding: 4px 12px;\n                border-radius: 4px;\n                color: {Colors.Light.TEXT_PRIMARY.name()};\n            }}\n            QMenu::item:selected {{\n                background-color: {Colors.Light.BUTTON_PRIMARY.name()};\n                color: white;\n            }}\n        \"\"\")\n        \n        for val in [50, 100, 200, 500]:\n            action = QAction(f\"{val} çº¿ç¨‹\", self)\n            action.triggered.connect(lambda checked, v=val: self.update_concurrent(v))\n            concurrent_menu.addAction(action)\n            \n        self.concurrent_btn.setMenu(concurrent_menu)\n        settings_row.addWidget(self.concurrent_btn)\n        \n        # å¼€å§‹æŒ‰é’®\n        self.start_button = ApplePrimaryButton(\"å¼€å§‹æ¢æµ‹\")\n        self.start_button.setFixedHeight(36)\n        self.start_button.setSizePolicy(QSizePolicy.Policy.Expanding, QSizePolicy.Policy.Fixed)\n        settings_row.addWidget(self.start_button)\n        \n        sidebar_layout.addLayout(settings_row)\n        \n        # ç§»é™¤å¤šä½™çš„ä¾§è¾¹æ å¯¼å‡ºæŒ‰é’®\n        # å¯¼å‡ºåŠŸèƒ½å·²ç§»åŠ¨åˆ°å³ä¸Šè§’å·¥å…·æ \n        \n        # æ¦‚è§ˆç»Ÿè®¡ (v0.app é£æ ¼: æ— å¡ç‰‡ï¼Œä»…é¡¶éƒ¨è¾¹æ¡†)\n        # sidebar_layout.addSpacing(Spacing.LG) # ç§»é™¤é¢å¤–é—´è·ï¼Œç”±å¸ƒå±€æ§åˆ¶\n        \n        stats_container = QWidget()\n        stats_container.setStyleSheet(\"\"\"\n            QWidget {\n                background-color: transparent;\n                border: none;\n                border-top: 1px solid #d1d1d6;\n            }\n            QLabel {\n                border: none; \n                background: transparent;\n            }\n        \"\"\")\n        \n        # æ¦‚è§ˆæ ‡é¢˜\n        stats_header_layout = QVBoxLayout()\n        stats_header_layout.setContentsMargins(0, 12, 0, 8) # é¡¶éƒ¨paddingå¯¹åº” border-t\n        stats_label = QLabel(\"æ¦‚è§ˆ\")\n        stats_label.setStyleSheet(\"color: #8e8e8e; font-size: 11px; font-weight: 600; text-transform: uppercase;\")\n        stats_header_layout.addWidget(stats_label)\n        \n        self.stats_layout = QVBoxLayout(stats_container)\n        self.stats_layout.setContentsMargins(0, 0, 0, 0)\n        self.stats_layout.setSpacing(6) # space-y-2 (8px approx)\n        self.stats_layout.addLayout(stats_header_layout) # å°†æ ‡é¢˜æ”¾å…¥å®¹å™¨ä»¥ä¾¿ä¸€èµ·ç®¡ç†\n        \n        # åˆå§‹åŒ–ç»Ÿè®¡æ ‡ç­¾ (Row layout: Justify Between)\n        self.stat_labels = {}\n        for key, color_code, label_text in [\n            (\"success\", \"#34c759\", \"æˆåŠŸ\"),\n            (\"failed\", \"#ff3b30\", \"å¤±è´¥\"),\n            (\"waiting\", \"#ff9500\", \"ç­‰å¾…ä¸­\"),\n        ]:\n            row = QHBoxLayout()\n            \n            # æ ‡ç­¾\n            lbl = QLabel(label_text)\n            lbl.setStyleSheet(\"color: #1d1d1f; font-size: 13px;\")\n            row.addWidget(lbl)\n            \n            row.addStretch()\n            \n            # æ•°å€¼\n            val = QLabel(\"0\")\n            val.setStyleSheet(f\"color: {color_code}; font-weight: 600; font-size: 13px;\")\n            row.addWidget(val)\n            \n            self.stats_layout.addLayout(row)\n            self.stat_labels[key] = val\n        \n        # æ€»è®¡ (å¸¦é¡¶éƒ¨åˆ†éš”çº¿)\n        total_separator = QFrame()\n        total_separator.setFixedHeight(1)\n        total_separator.setStyleSheet(\"background-color: #d1d1d6; margin-top: 8px;\")\n        self.stats_layout.addWidget(total_separator)\n        \n        row_total = QHBoxLayout()\n        lbl_total = QLabel(\"æ€»è®¡\")\n        lbl_total.setStyleSheet(\"color: #1d1d1f; font-size: 13px; font-weight: 500;\")\n        row_total.addWidget(lbl_total)\n        row_total.addStretch()\n        val_total = QLabel(\"0\")\n        val_total.setStyleSheet(\"color: #1d1d1f; font-weight: 600; font-size: 13px;\")\n        row_total.addWidget(val_total)\n        \n        self.stats_layout.addLayout(row_total)\n        self.stat_labels[\"total\"] = val_total\n            \n        sidebar_layout.addWidget(stats_container)\n        \n        sidebar_layout.addStretch()\n        \n        # ==== 3.2 å³ä¾§ä¸»å†…å®¹åŒºï¼ˆç™½è‰²èƒŒæ™¯ï¼‰====\n        main_content = QWidget()\n        main_content.setStyleSheet(f\"background-color: {Colors.Light.BG_PRIMARY.name()};\")\n        \n        content_layout = QVBoxLayout(main_content)\n        content_layout.setContentsMargins(0, 0, 0, 0)\n        content_layout.setSpacing(0)\n        \n        # å·¥å…·æ \n        toolbar = QWidget()\n        toolbar.setFixedHeight(40)\n        toolbar.setStyleSheet(f\"\"\"\n            background-color: {Colors.Light.BG_TABLEHEAD.name()};\n            border-bottom: 1px solid {Colors.Light.BORDER_SECONDARY.name()};\n        \"\"\")\n        toolbar_layout = QHBoxLayout(toolbar)\n        toolbar_layout.setContentsMargins(16, 0, 16, 0)\n        \n        toolbar_label = QLabel(\"ç»“æœ\")\n        toolbar_label.setStyleSheet(f\"\"\"\n            color: {Colors.Light.TEXT_SECONDARY.name()};\n            font-size: 11px;\n            font-weight: 600;\n            text-transform: uppercase;\n        \"\"\")\n        toolbar_layout.addWidget(toolbar_label)\n        toolbar_layout.addStretch()\n        \n        self.export_toolbar_btn = AppleSmallButton(\"å¯¼å‡º\")\n        \n        # åˆ›å»ºå¯¼å‡ºèœå•\n        export_menu = QMenu(self)\n        export_menu.addAction(\"ğŸ“„ CSV æ ¼å¼\", self.export_csv)\n        export_menu.addAction(\"ğŸ“Š Excel æ ¼å¼\", self.export_excel)\n        export_menu.addAction(\"ğŸ“‹ JSON æ ¼å¼\", self.export_json)\n        export_menu.addAction(\"ğŸ“ Markdown\", self.export_markdown)\n        export_menu.addSeparator()\n        export_menu.addAction(\"ğŸ–¨ï¸ æ‰“å°é¢„è§ˆ\", self.print_preview)\n        \n        self.export_toolbar_btn.setMenu(export_menu)\n        toolbar_layout.addWidget(self.export_toolbar_btn)\n        \n        content_layout.addWidget(toolbar)\n        \n        content_layout.addWidget(toolbar)\n        \n        # === 4.0 ç©ºçŠ¶æ€é¡µé¢ (v0.app é£æ ¼) ===\n        self.empty_state = QWidget()\n        empty_layout = QVBoxLayout(self.empty_state)\n        empty_layout.setAlignment(Qt.AlignmentFlag.AlignCenter)\n        empty_layout.setSpacing(16)\n        \n        # å¿ƒè·³å›¾æ ‡ (ä¿®æ”¹ä¸ºç°è‰²ï¼Œæ›´ç²¾è‡´ï¼Œå¯¹åº” Activity icon)\n        icon_label = QLabel(\"âš¡\") # æš‚æ—¶ä½¿ç”¨ unicode, ç†æƒ³æƒ…å†µæ˜¯ SVG\n        icon_label.setStyleSheet(f\"\"\"\n            font-size: 40px;\n            color: #c7c7c7; \n            margin-bottom: 12px;\n        \"\"\")\n        icon_label.setAlignment(Qt.AlignmentFlag.AlignCenter)\n        empty_layout.addWidget(icon_label)\n        \n        empty_title = QLabel(\"æš‚æ— ç»“æœ\")\n        empty_title.setStyleSheet(\"color: #1d1d1f; font-size: 15px; font-weight: 500; margin-bottom: 4px;\")\n        empty_title.setAlignment(Qt.AlignmentFlag.AlignCenter)\n        empty_layout.addWidget(empty_title)\n        \n        empty_desc = QLabel(\"è¾“å…¥ç›®æ ‡åœ°å€å¹¶ç‚¹å‡»å¼€å§‹æ¢æµ‹\")\n        empty_desc.setStyleSheet(\"color: #8e8e8e; font-size: 13px;\")\n        empty_desc.setAlignment(Qt.AlignmentFlag.AlignCenter)\n        empty_layout.addWidget(empty_desc)\n        \n        title_label = QLabel(\"æš‚æ— ç»“æœ\")\n        title_label.setStyleSheet(f\"\"\"\n            font-size: 16px;\n            font-weight: 600;\n            color: {Colors.Light.TEXT_PRIMARY.name()};\n        \"\"\")\n        title_label.setAlignment(Qt.AlignmentFlag.AlignCenter)\n        empty_layout.addWidget(title_label)\n        \n        desc_label = QLabel(\"è¾“å…¥ç›®æ ‡åœ°å€å¹¶ç‚¹å‡»å¼€å§‹æ¢æµ‹\")\n        desc_label.setStyleSheet(f\"\"\"\n            font-size: 13px;\n            color: {Colors.Light.TEXT_SECONDARY.name()};\n        \"\"\")\n        desc_label.setAlignment(Qt.AlignmentFlag.AlignCenter)\n        empty_layout.addWidget(desc_label)\n        \n        content_layout.addWidget(self.empty_state)\n\n        # è¡¨æ ¼ (é»˜è®¤éšè—)\n        self.result_table = QTableWidget()\n        self.result_table.hide()\n        \n        self.result_table.setColumnCount(6)\n        self.result_table.setHorizontalHeaderLabels([\n            \"#\", \"åœ°å€\", \"çŠ¶æ€\", \"ç”¨æˆ·å\", \"å¯†ç \", \"è¯¦æƒ…\"\n        ])\n        \n        # è¡¨æ ¼æ ·å¼\n        self.result_table.setShowGrid(False)\n        self.result_table.setAlternatingRowColors(False) # ç”±design_systemæ§åˆ¶itemåŠhover\n        self.result_table.verticalHeader().setVisible(False)\n        self.result_table.setSelectionBehavior(QTableWidget.SelectionBehavior.SelectRows)\n        self.result_table.setSortingEnabled(True)\n        self.result_table.setContextMenuPolicy(Qt.ContextMenuPolicy.CustomContextMenu)\n        self.result_table.setFrameShape(QFrame.Shape.NoFrame)\n        \n        # åˆ—å®½\n        header = self.result_table.horizontalHeader()\n        header.setSectionResizeMode(0, QHeaderView.ResizeMode.ResizeToContents)\n        header.setSectionResizeMode(1, QHeaderView.ResizeMode.Stretch)\n        header.setSectionResizeMode(2, QHeaderView.ResizeMode.ResizeToContents)\n        header.setSectionResizeMode(3, QHeaderView.ResizeMode.ResizeToContents)\n        header.setSectionResizeMode(4, QHeaderView.ResizeMode.ResizeToContents)\n        header.setSectionResizeMode(5, QHeaderView.ResizeMode.Stretch)\n        header.setFixedHeight(28)\n        \n        content_layout.addWidget(self.result_table)\n        \n        # === æ·»åŠ ä¾§è¾¹æ å’Œä¸»å†…å®¹åˆ°åˆ†å‰²å™¨ ===\n        content_splitter.addWidget(sidebar)\n        content_splitter.addWidget(main_content)\n        content_splitter.setStretchFactor(0, 0)  # å›ºå®šå®½åº¦\n        content_splitter.setStretchFactor(1, 1)  # å¯ä¼¸ç¼©\n        \n        window_layout.addWidget(content_splitter)\n        main_container.addWidget(self.mac_window)\n        \n        # === éšè—åŠŸèƒ½æ€§æ§ä»¶ï¼ˆé€»è¾‘å…¼å®¹ï¼‰===\n        self.concurrent_spinbox = QSpinBox()\n        self.concurrent_spinbox.setMinimum(1)\n        self.concurrent_spinbox.setMaximum(500)\n        self.concurrent_spinbox.setValue(50)\n        self.concurrent_spinbox.hide()\n        \n        # å‘¼å¸ç¯\n        self.breathing_light = QWidget() # å ä½\n        self.breathing_light.set_active = lambda x: None\n        \n    def update_concurrent(self, val):\n        \"\"\"æ›´æ–°å¹¶å‘æ•°\"\"\"\n        self.concurrent_spinbox.setValue(val)\n        self.concurrent_btn.setText(f\"å¹¶å‘ {val} âŒ„\")\n        \n    def connect_signals(self):\n        \"\"\"è¿æ¥ä¿¡å·\"\"\"\n        self.start_button.clicked.connect(self.on_start_stop_clicked)\n        self.concurrent_spinbox.valueChanged.connect(self.on_concurrent_changed)\n        \n        # è¿æ¥å¼‚æ­¥ä¿¡å·\n        self.login_manager.signal_bridge.update_row.connect(self.update_table_row)\n        self.login_manager.signal_bridge.task_finished.connect(self.on_task_finished)\n        \n        # è¿æ¥è¡¨æ ¼å³é”®èœå•\n        self.result_table.customContextMenuRequested.connect(self.show_table_context_menu)\n        \n    def on_concurrent_changed(self, value):\n        \"\"\"å¹¶å‘æ•°æ”¹å˜\"\"\"\n        self.login_manager.max_concurrent = value\n        self.login_manager.semaphore = asyncio.Semaphore(value)\n        \n    def on_start_stop_clicked(self):\n        \"\"\"å¼€å§‹/åœæ­¢æŒ‰é’®ç‚¹å‡»\"\"\"\n        if self.start_button.text() == \"â–¶ å¼€å§‹æ¢æµ‹\":\n            self.start_detection()\n        else:\n            self.stop_detection()\n            \n    def start_detection(self):\n        \"\"\"å¼€å§‹æ¢æµ‹\"\"\"\n        # è·å–è¾“å…¥çš„ URL åˆ—è¡¨\n        urls = self.url_input.toPlainText().strip().split('\\n')\n        urls = [url.strip() for url in urls if url.strip()]\n        \n        if not urls:\n            QMessageBox.warning(self, \"è­¦å‘Š\", \"è¯·å…ˆè¾“å…¥è‡³å°‘ä¸€ä¸ªç›®æ ‡åœ°å€ï¼\")\n            return\n        \n        # åˆ‡æ¢æ˜¾ç¤ºçŠ¶æ€\n        self.empty_state.hide()\n        self.result_table.show()\n        \n        # æ¸…ç©ºè¡¨æ ¼\n        self.result_table.setRowCount(0)\n        \n        # åˆå§‹åŒ–è¡¨æ ¼\n        self.result_table.setRowCount(len(urls))\n        for idx, url in enumerate(urls):\n            # åºå·\n            self.result_table.setItem(idx, 0, QTableWidgetItem(str(idx + 1)))\n            # ç›®æ ‡åœ°å€\n            self.result_table.setItem(idx, 1, QTableWidgetItem(url))\n            # çŠ¶æ€\n            self.result_table.setItem(idx, 2, QTableWidgetItem(\"å¾…æ£€æµ‹\"))\n            # å…¶ä»–åˆ—\n            self.result_table.setItem(idx, 3, QTableWidgetItem(\"\"))\n            self.result_table.setItem(idx, 4, QTableWidgetItem(\"\"))\n            self.result_table.setItem(idx, 5, QTableWidgetItem(\"\"))\n        \n        # æ›´æ–°UIçŠ¶æ€\n        self.start_button.setText(\"åœæ­¢\")\n        # æŒ‰é’®æ ·å¼ç”± ApplePrimaryButton è‡ªåŠ¨ç®¡ç†\n        self.breathing_light.set_active(True)\n        self.url_input.setEnabled(False)\n        self.concurrent_btn.setEnabled(False)\n        self.export_toolbar_btn.setEnabled(False)\n        \n        # æ›´æ–°ç»Ÿè®¡\n        if hasattr(self, 'stat_labels'):\n             self.stat_labels['total'].setText(str(len(urls)))\n             self.stat_labels['waiting'].setText(str(len(urls)))\n             self.stat_labels['success'].setText(\"0\")\n             self.stat_labels['failed'].setText(\"0\")\n        \n        # å¯åŠ¨å¼‚æ­¥ä»»åŠ¡\n        asyncio.ensure_future(self.login_manager.batch_detect(urls))\n        \n    def stop_detection(self):\n        \"\"\"åœæ­¢æ¢æµ‹\"\"\"\n        self.login_manager.stop()\n        self.on_task_finished()\n        \n        # æ›´æ–°ç»Ÿè®¡\n        success_count = self.count_status(\"ç™»å½•æˆåŠŸ\")\n        failed_count = self.count_status(\"ç™»å½•å¤±è´¥\")\n        timeout_count = self.count_status(\"è¿æ¥è¶…æ—¶\")\n        \n        self.update_statistics()\n        \n    def update_table_row(self, row: int, status: str, user: str, password: str, notes: str):\n        \"\"\"æ›´æ–°è¡¨æ ¼è¡Œï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰\"\"\"\n        # æ›´æ–°çŠ¶æ€\n        self.result_table.setItem(row, 2, QTableWidgetItem(status))\n        self.result_table.setItem(row, 3, QTableWidgetItem(user))\n        self.result_table.setItem(row, 4, QTableWidgetItem(password))\n        self.result_table.setItem(row, 5, QTableWidgetItem(notes))\n        \n        # è®¾ç½®é¢œè‰²\n        if status == \"ç™»å½•æˆåŠŸ\":\n            color = QColor(144, 238, 144)  # æµ…ç»¿è‰²\n        elif status in [\"ç™»å½•å¤±è´¥\", \"è¿æ¥è¶…æ—¶\", \"æ— æ³•è¿æ¥\", \"æ£€æµ‹å¼‚å¸¸\"]:\n            color = QColor(255, 182, 193)  # æµ…çº¢è‰²\n        else:\n            color = QColor(255, 255, 255)  # ç™½è‰²\n            \n        for col in range(6):\n            item = self.result_table.item(row, col)\n            if item:\n                item.setBackground(color)\n                \n        # æ›´æ–°ç»Ÿè®¡\n        self.update_statistics()\n        \n    def update_statistics(self):\n        \"\"\"æ›´æ–°ç»Ÿè®¡ä¿¡æ¯\"\"\"\n        total = self.result_table.rowCount()\n        success = self.count_status(\"ç™»å½•æˆåŠŸ\")\n        failed = self.count_status(\"ç™»å½•å¤±è´¥\")\n        timeout = self.count_status(\"è¿æ¥è¶…æ—¶\") + self.count_status(\"æ— æ³•è¿æ¥\") + self.count_status(\"æ£€æµ‹å¼‚å¸¸\")\n        pending = self.count_status(\"å¾…æ£€æµ‹\") + self.count_status(\"ç­‰å¾…ä¸­\") + self.count_status(\"æ­£åœ¨\")\n        \n        if hasattr(self, 'stat_labels'):\n            self.stat_labels['total'].setText(str(total))\n            self.stat_labels['success'].setText(str(success))\n            self.stat_labels['failed'].setText(str(failed))\n            self.stat_labels['waiting'].setText(str(pending))\n        \n    def count_status(self, status: str) -> int:\n        \"\"\"ç»Ÿè®¡æŒ‡å®šçŠ¶æ€çš„æ•°é‡\"\"\"\n        count = 0\n        for row in range(self.result_table.rowCount()):\n            item = self.result_table.item(row, 2)\n            if item and status in item.text():\n                count += 1\n        return count\n        \n    def on_task_finished(self):\n        \"\"\"ä»»åŠ¡å®Œæˆ\"\"\"\n        self.start_button.setText(\"å¼€å§‹æ¢æµ‹\")\n        # æŒ‰é’®æ ·å¼ç”± ApplePrimaryButton è‡ªåŠ¨ç®¡ç†\n        self.breathing_light.set_active(False)\n        self.url_input.setEnabled(True)\n        self.concurrent_btn.setEnabled(True)\n        self.export_toolbar_btn.setEnabled(True)\n        \n        # æœ€ç»ˆç»Ÿè®¡\n        success_count = self.count_status(\"ç™»å½•æˆåŠŸ\")\n        failed_count = self.count_status(\"ç™»å½•å¤±è´¥\")\n        timeout_count = self.count_status(\"è¿æ¥è¶…æ—¶\")\n        no_connect_count = self.count_status(\"æ— æ³•è¿æ¥\")\n        \n        self.update_statistics()\n        \n        # å¼¹çª—æç¤º\n        QMessageBox.information(\n            self,\n            \"å®Œæˆ\",\n            f\"æ¢æµ‹å®Œæˆï¼\\næˆåŠŸ: {success_count} | å¤±è´¥: {failed_count} | è¶…æ—¶: {timeout_count}\"\n        )\n    \n    def show_table_context_menu(self, pos):\n        \"\"\"æ˜¾ç¤ºè¡¨æ ¼å³é”®èœå•\"\"\"\n        # è·å–å½“å‰é€‰ä¸­çš„è¡Œ\n        current_row = self.result_table.rowAt(pos.y())\n        if current_row < 0:\n            return\n        \n        # åˆ›å»ºèœå•\n        menu = QMenu(self)\n        \n        # å¤åˆ¶æ“ä½œ\n        copy_row_action = QAction(\"ğŸ“‹ å¤åˆ¶æ•´è¡Œ\", self)\n        copy_row_action.triggered.connect(lambda: self.copy_table_row(current_row))\n        menu.addAction(copy_row_action)\n        \n        copy_address_action = QAction(\"ğŸ“‹ å¤åˆ¶åœ°å€\", self)\n        copy_address_action.triggered.connect(lambda: self.copy_cell(current_row, 1))\n        menu.addAction(copy_address_action)\n        \n        copy_credential_action = QAction(\"ğŸ“‹ å¤åˆ¶å‡­è¯\", self)\n        copy_credential_action.triggered.connect(lambda: self.copy_credentials(current_row))\n        menu.addAction(copy_credential_action)\n        \n        menu.addSeparator()\n        \n        # å…¶ä»–æ“ä½œ\n        retest_action = QAction(\"ğŸ”„ é‡æ–°æµ‹è¯•\", self)\n        retest_action.triggered.connect(lambda: self.retest_device(current_row))\n        menu.addAction(retest_action)\n        \n        delete_action = QAction(\"ğŸ—‘ï¸ åˆ é™¤\", self)\n        delete_action.triggered.connect(lambda: self.delete_row(current_row))\n        menu.addAction(delete_action)\n        \n        # æ˜¾ç¤ºèœå•\n        menu.exec(self.result_table.mapToGlobal(pos))\n    \n    def copy_table_row(self, row: int):\n        \"\"\"å¤åˆ¶æ•´è¡Œåˆ°å‰ªè´´æ¿\"\"\"\n        row_data = []\n        for col in range(self.result_table.columnCount()):\n            item = self.result_table.item(row, col)\n            row_data.append(item.text() if item else \"\")\n        \n        # ä½¿ç”¨åˆ¶è¡¨ç¬¦åˆ†éš”\n        QApplication.clipboard().setText(\"\\t\".join(row_data))\n        self.stats_text.setText(f\"âœ… å·²å¤åˆ¶ç¬¬ {row + 1} è¡Œ\")\n    \n    def copy_cell(self, row: int, col: int):\n        \"\"\"å¤åˆ¶å•ä¸ªå•å…ƒæ ¼\"\"\"\n        item = self.result_table.item(row, col)\n        if item:\n            QApplication.clipboard().setText(item.text())\n            self.stats_text.setText(f\"âœ… å·²å¤åˆ¶: {item.text()}\")\n    \n    def copy_credentials(self, row: int):\n        \"\"\"å¤åˆ¶å‡­è¯ï¼ˆç”¨æˆ·å/å¯†ç ï¼‰\"\"\"\n        username_item = self.result_table.item(row, 3)\n        password_item = self.result_table.item(row, 4)\n        \n        if username_item and password_item:\n            credentials = f\"{username_item.text()}/{password_item.text()}\"\n            QApplication.clipboard().setText(credentials)\n            self.stats_text.setText(f\"âœ… å·²å¤åˆ¶å‡­è¯: {credentials}\")\n    \n    def retest_device(self, row: int):\n        \"\"\"é‡æ–°æµ‹è¯•å•ä¸ªè®¾å¤‡\"\"\"\n        address_item = self.result_table.item(row, 1)\n        if address_item:\n            # TODO: å®ç°å•ä¸ªè®¾å¤‡é‡æµ‹åŠŸèƒ½\n            self.stats_text.setText(f\"ğŸ”„ å‡†å¤‡é‡æ–°æµ‹è¯•: {address_item.text()}\")\n    \n    def delete_row(self, row: int):\n        \"\"\"åˆ é™¤è¡Œ\"\"\"\n        reply = QMessageBox.question(\n            self,\n            \"ç¡®è®¤åˆ é™¤\",\n            f\"ç¡®å®šè¦åˆ é™¤ç¬¬ {row + 1} è¡Œå—ï¼Ÿ\",\n            QMessageBox.StandardButton.Yes | QMessageBox.StandardButton.No\n        )\n        \n        if reply == QMessageBox.StandardButton.Yes:\n            self.result_table.removeRow(row)\n            self.update_statistics()\n            self.stats_text.setText(f\"ğŸ—‘ï¸ å·²åˆ é™¤ç¬¬ {row + 1} è¡Œ\")\n    \n    def export_csv(self):\n        \"\"\"å¯¼å‡ºä¸º CSV\"\"\"\n        filename, _ = QFileDialog.getSaveFileName(\n            self,\n            \"å¯¼å‡ºä¸º CSV\",\n            f\"openwrt_results_{datetime.now().strftime('%Y%m%d_%H%M%S')}.csv\",\n            \"CSV Files (*.csv)\"\n        )\n        \n        if not filename:\n            return\n        \n        try:\n            with open(filename, 'w', newline='', encoding='utf-8-sig') as csvfile:\n                writer = csv.writer(csvfile)\n                \n                # å†™å…¥è¡¨å¤´\n                headers = []\n                for col in range(self.result_table.columnCount()):\n                    headers.append(self.result_table.horizontalHeaderItem(col).text())\n                writer.writerow(headers)\n                \n                # å†™å…¥æ•°æ®\n                for row in range(self.result_table.rowCount()):\n                    row_data = []\n                    for col in range(self.result_table.columnCount()):\n                        item = self.result_table.item(row, col)\n                        row_data.append(item.text() if item else \"\")\n                    writer.writerow(row_data)\n            \n            QMessageBox.information(self, \"æˆåŠŸ\", f\"å·²å¯¼å‡º {self.result_table.rowCount()} è¡Œæ•°æ®åˆ°:\\n{filename}\")\n        except Exception as e:\n            QMessageBox.critical(self, \"é”™è¯¯\", f\"å¯¼å‡ºå¤±è´¥:\\n{str(e)}\")\n    \n    def export_excel(self):\n        \"\"\"å¯¼å‡ºä¸º Excel æ ¼å¼\"\"\"\n        try:\n            import openpyxl\n            from openpyxl.styles import Font, PatternFill, Alignment\n        except ImportError:\n            QMessageBox.warning(\n                self, \n                \"ç¼ºå°‘ä¾èµ–\", \n                \"éœ€è¦å®‰è£… openpyxl åº“:\\npip install openpyxl\"\n            )\n            return\n        \n        filename, _ = QFileDialog.getSaveFileName(\n            self,\n            \"å¯¼å‡ºä¸º Excel\",\n            f\"openwrt_results_{datetime.now().strftime('%Y%m%d_%H%M%S')}.xlsx\",\n            \"Excel Files (*.xlsx)\"\n        )\n        \n        if not filename:\n            return\n        \n        try:\n            wb = openpyxl.Workbook()\n            ws = wb.active\n            ws.title = \"æ¢æµ‹ç»“æœ\"\n            \n            # å†™å…¥è¡¨å¤´\n            headers = []\n            for col in range(self.result_table.columnCount()):\n                headers.append(self.result_table.horizontalHeaderItem(col).text())\n            ws.append(headers)\n            \n            # è®¾ç½®è¡¨å¤´æ ·å¼\n            for cell in ws[1]:\n                cell.font = Font(bold=True)\n                cell.fill = PatternFill(start_color=\"DDEBF7\", end_color=\"DDEBF7\", fill_type=\"solid\")\n                cell.alignment = Alignment(horizontal=\"center\")\n            \n            # å†™å…¥æ•°æ®\n            for row in range(self.result_table.rowCount()):\n                row_data = []\n                for col in range(self.result_table.columnCount()):\n                    item = self.result_table.item(row, col)\n                    row_data.append(item.text() if item else \"\")\n                ws.append(row_data)\n                \n                # æ ¹æ®çŠ¶æ€è®¾ç½®é¢œè‰²\n                status_cell = ws.cell(row + 2, 3)  # çŠ¶æ€åˆ—\n                if \"æˆåŠŸ\" in status_cell.value:\n                    for cell in ws[row + 2]:\n                        cell.fill = PatternFill(start_color=\"C6EFCE\", end_color=\"C6EFCE\", fill_type=\"solid\")\n                elif \"å¤±è´¥\" in status_cell.value or \"è¶…æ—¶\" in status_cell.value:\n                    for cell in ws[row + 2]:\n                        cell.fill = PatternFill(start_color=\"FFC7CE\", end_color=\"FFC7CE\", fill_type=\"solid\")\n            \n            # è‡ªåŠ¨è°ƒæ•´åˆ—å®½\n            for column in ws.columns:\n                max_length = 0\n                column_letter = column[0].column_letter\n                for cell in column:\n                    try:\n                        if len(str(cell.value)) > max_length:\n                            max_length = len(str(cell.value))\n                    except:\n                        pass\n                ws.column_dimensions[column_letter].width = min(max_length + 2, 50)\n            \n            wb.save(filename)\n            QMessageBox.information(self, \"æˆåŠŸ\", f\"å·²å¯¼å‡ºåˆ°:\\n{filename}\")\n        except Exception as e:\n            QMessageBox.critical(self, \"é”™è¯¯\", f\"å¯¼å‡ºå¤±è´¥:\\n{str(e)}\")\n    \n    def export_json(self):\n        \"\"\"å¯¼å‡ºä¸º JSON æ ¼å¼\"\"\"\n        import json\n        \n        filename, _ = QFileDialog.getSaveFileName(\n            self,\n            \"å¯¼å‡ºä¸º JSON\",\n            f\"openwrt_results_{datetime.now().strftime('%Y%m%d_%H%M%S')}.json\",\n            \"JSON Files (*.json)\"\n        )\n        \n        if not filename:\n            return\n        \n        try:\n            # è·å–è¡¨å¤´\n            headers = []\n            for col in range(self.result_table.columnCount()):\n                headers.append(self.result_table.horizontalHeaderItem(col).text())\n            \n            # æ„å»ºæ•°æ®\n            data = []\n            for row in range(self.result_table.rowCount()):\n                row_dict = {}\n                for col in range(self.result_table.columnCount()):\n                    item = self.result_table.item(row, col)\n                    row_dict[headers[col]] = item.text() if item else \"\"\n                data.append(row_dict)\n            \n            # å†™å…¥æ–‡ä»¶\n            with open(filename, 'w', encoding='utf-8') as f:\n                json.dump(data, f, ensure_ascii=False, indent=2)\n            \n            QMessageBox.information(self, \"æˆåŠŸ\", f\"å·²å¯¼å‡º {len(data)} æ¡è®°å½•åˆ°:\\n{filename}\")\n        except Exception as e:\n            QMessageBox.critical(self, \"é”™è¯¯\", f\"å¯¼å‡ºå¤±è´¥:\\n{str(e)}\")\n    \n    def export_markdown(self):\n        \"\"\"å¯¼å‡ºä¸º Markdown æ ¼å¼\"\"\"\n        filename, _ = QFileDialog.getSaveFileName(\n            self,\n            \"å¯¼å‡ºä¸º Markdown\",\n            f\"openwrt_results_{datetime.now().strftime('%Y%m%d_%H%M%S')}.md\",\n            \"Markdown Files (*.md)\"\n        )\n        \n        if not filename:\n            return\n        \n        try:\n            with open(filename, 'w', encoding='utf-8') as f:\n                # å†™å…¥æ ‡é¢˜\n                f.write(\"# OpenWrt æ¢æµ‹ç»“æœ\\n\\n\")\n                f.write(f\"**ç”Ÿæˆæ—¶é—´**: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\\n\\n\")\n                \n                # å†™å…¥ç»Ÿè®¡\n                total = self.result_table.rowCount()\n                success = self.count_status(\"ç™»å½•æˆåŠŸ\")\n                failed = self.count_status(\"ç™»å½•å¤±è´¥\")\n                \n                f.write(\"## ç»Ÿè®¡æ¦‚è§ˆ\\n\\n\")\n                f.write(f\"- **æ€»è®¾å¤‡æ•°**: {total}\\n\")\n                f.write(f\"- **æˆåŠŸ**: {success}\\n\")\n                f.write(f\"- **å¤±è´¥**: {failed}\\n\")\n                f.write(f\"- **æˆåŠŸç‡**: {(success/total*100):.1f}%\\n\\n\")\n                \n                # å†™å…¥è¡¨æ ¼\n                f.write(\"## è¯¦ç»†ç»“æœ\\n\\n\")\n                \n                # è¡¨å¤´\n                f.write(\"| \")\n                for col in range(self.result_table.columnCount()):\n                    f.write(self.result_table.horizontalHeaderItem(col).text() + \" | \")\n                f.write(\"\\n\")\n                \n                # åˆ†éš”çº¿\n                f.write(\"| \" + \" | \".join([\"---\"] * self.result_table.columnCount()) + \" |\\n\")\n                \n                # æ•°æ®è¡Œ\n                for row in range(self.result_table.rowCount()):\n                    f.write(\"| \")\n                    for col in range(self.result_table.columnCount()):\n                        item = self.result_table.item(row, col)\n                        text = item.text() if item else \"\"\n                        f.write(text + \" | \")\n                    f.write(\"\\n\")\n            \n            QMessageBox.information(self, \"æˆåŠŸ\", f\"å·²å¯¼å‡ºåˆ°:\\n{filename}\")\n        except Exception as e:\n            QMessageBox.critical(self, \"é”™è¯¯\", f\"å¯¼å‡ºå¤±è´¥:\\n{str(e)}\")\n    \n    def print_preview(self):\n        \"\"\"æ‰“å°é¢„è§ˆ\"\"\"\n        QMessageBox.information(\n            self,\n            \"æ‰“å°é¢„è§ˆ\",\n            \"æ‰“å°åŠŸèƒ½å¼€å‘ä¸­...\\n\\nå½“å‰å¯ä»¥:\\n1. å¯¼å‡ºä¸º PDF: ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ Markdown å¯¼å‡º\\n2. ç›´æ¥æ‰“å°: å¯¼å‡º Excel åæ‰“å°\"\n        )\n    \n    def export_to_csv(self):\n        \"\"\"å¯¼å‡ºä¸º CSV\"\"\"\n        filename, _ = QFileDialog.getSaveFileName(\n            self,\n            \"å¯¼å‡ºä¸º CSV\",\n            f\"openwrt_results_{datetime.now().strftime('%Y%m%d_%H%M%S')}.csv\",\n            \"CSV Files (*.csv)\"\n        )\n        \n        if not filename:\n            return\n        \n        try:\n            with open(filename, 'w', newline='', encoding='utf-8-sig') as csvfile:\n                writer = csv.writer(csvfile)\n                \n                # å†™å…¥è¡¨å¤´\n                headers = []\n                for col in range(self.result_table.columnCount()):\n                    headers.append(self.result_table.horizontalHeaderItem(col).text())\n                writer.writerow(headers)\n                \n                # å†™å…¥æ•°æ®\n                for row in range(self.result_table.rowCount()):\n                    row_data = []\n                    for col in range(self.result_table.columnCount()):\n                        item = self.result_table.item(row, col)\n                        row_data.append(item.text() if item else \"\")\n                    writer.writerow(row_data)\n            \n            QMessageBox.information(self, \"æˆåŠŸ\", f\"å·²æˆåŠŸå¯¼å‡ºåˆ°:\\n{filename}\")\n        except Exception as e:\n            QMessageBox.critical(self, \"é”™è¯¯\", f\"å¯¼å‡ºå¤±è´¥:\\n{str(e)}\")\n\n    def toggle_maximize(self):\n        \"\"\"åˆ‡æ¢æœ€å¤§åŒ–\"\"\"\n        if self.isMaximized():\n            self.showNormal()\n            # æ¢å¤åœ†è§’\n            self.mac_window.setStyleSheet(f\"\"\"\n                QFrame {{\n                    background-color: {Colors.Light.BG_SECONDARY.name()};\n                    border: 1px solid {Colors.Light.BORDER_PRIMARY.name()};\n                    border-radius: 10px;\n                }}\n            \"\"\")\n            self.centralWidget().layout().setContentsMargins(20, 20, 20, 20)\n        else:\n            self.showMaximized()\n            # æœ€å¤§åŒ–æ—¶å»é™¤åœ†è§’\n            self.mac_window.setStyleSheet(f\"\"\"\n                QFrame {{\n                    background-color: {Colors.Light.BG_SECONDARY.name()};\n                    border: none;\n                    border-radius: 0px;\n                }}\n            \"\"\")\n            self.centralWidget().layout().setContentsMargins(0, 0, 0, 0)\n\n\n# ============================================================================\n# ä¸»ç¨‹åºå…¥å£\n# ============================================================================\ndef main():\n    \"\"\"ä¸»å‡½æ•°\"\"\"\n    app = QApplication(sys.argv)\n    \n    # è®¾ç½®åº”ç”¨æ ·å¼\n    app.setStyle(\"Fusion\")\n    \n    # è®¾ç½® qasync äº‹ä»¶å¾ªç¯\n    loop = qasync.QEventLoop(app)\n    asyncio.set_event_loop(loop)\n    \n    # åˆ›å»ºä¸»çª—å£\n    window = MainWindow()\n    window.show()\n    \n    # è¿è¡Œäº‹ä»¶å¾ªç¯\n    with loop:\n        loop.run_forever()\n\n\nif __name__ == \"__main__\":\n    main()\n"}, {"path": "_backup_v2_pyqt/README.md", "content": "# OpenWrt æ‰¹é‡èµ„äº§ç®¡ç†åŠ©æ‰‹\n\n<div align=\"center\">\n\nğŸ“¡ **ä¸€æ¬¾åŸºäº PyQt6 çš„ OpenWrt è®¾å¤‡æ‰¹é‡ç™»å½•æ¢æµ‹å·¥å…·**\n\næ”¯æŒ 1000+ è®¾å¤‡å¹¶å‘æ¢æµ‹ | å¼‚æ­¥é«˜æ€§èƒ½ | ç•Œé¢æµç•…\n\n</div>\n\n---\n\n## âœ¨ åŠŸèƒ½ç‰¹æ€§\n\n- ğŸš€ **é«˜æ€§èƒ½å¼‚æ­¥å¹¶å‘**ï¼šä½¿ç”¨ `aiohttp` + `asyncio` å®ç°å¼‚æ­¥ç½‘ç»œè¯·æ±‚ï¼Œæ”¯æŒ 1000+ è®¾å¤‡åŒæ—¶æ¢æµ‹\n- ğŸ¯ **æ™ºèƒ½å‡­è¯æ¢æµ‹**ï¼šè‡ªåŠ¨å°è¯•å¤šç»„å¸¸ç”¨å‡­è¯ï¼ˆroot/passwordã€admin/admin ç­‰ï¼‰\n- ğŸ’¡ **å‘¼å¸ç¯åŠ¨ç”»**ï¼šå®æ—¶æ˜¾ç¤ºæ¢æµ‹çŠ¶æ€ï¼Œè¿è¡Œæ—¶å‘¼å¸é—ªçƒ\n- ğŸ“Š **å®æ—¶ç»“æœå±•ç¤º**ï¼šè¡¨æ ¼å®æ—¶æ›´æ–°ï¼ŒæˆåŠŸ/å¤±è´¥çŠ¶æ€é¢œè‰²æ ‡è®°\n- ğŸ’¾ **CSV å¯¼å‡º**ï¼šä¸€é”®å¯¼å‡ºæ¢æµ‹ç»“æœï¼Œæ–¹ä¾¿åç»­å¤„ç†\n- ğŸ”’ **å®‰å…¨è®¾ç½®**ï¼šè‡ªåŠ¨å¿½ç•¥ SSL è¯ä¹¦éªŒè¯ï¼Œæ”¯æŒè‡ªç­¾åè¯ä¹¦\n- âš™ï¸ **å¯è°ƒå¹¶å‘æ•°**ï¼š1-500 å¯è°ƒï¼Œé»˜è®¤ 50 å¹¶å‘\n\n---\n\n## ğŸ“‹ ç³»ç»Ÿè¦æ±‚\n\n- **æ“ä½œç³»ç»Ÿ**ï¼šWindows / macOS / Linux\n- **Python ç‰ˆæœ¬**ï¼šPython 3.8+\n- **ä¾èµ–åº“**ï¼š\n  - PyQt6 >= 6.6.0\n  - aiohttp >= 3.9.0\n  - qasync >= 0.24.0\n\n---\n\n## ğŸ› ï¸ å®‰è£…æ­¥éª¤\n\n### 1ï¸âƒ£ å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®\n\n```bash\ngit clone <repository-url>\ncd openwrt-manager\n```\n\n### 2ï¸âƒ£ å®‰è£…ä¾èµ–\n\n```bash\npip install -r requirements.txt\n```\n\n### 3ï¸âƒ£ è¿è¡Œç¨‹åº\n\n```bash\npython openwrt_manager.py\n```\n\n---\n\n## ğŸ® ä½¿ç”¨è¯´æ˜\n\n### åŸºæœ¬æ“ä½œæµç¨‹\n\n1. **è¾“å…¥ç›®æ ‡åœ°å€**\n   - åœ¨å·¦ä¾§æ–‡æœ¬æ¡†ä¸­ï¼Œæ¯è¡Œè¾“å…¥ä¸€ä¸ª OpenWrt ç®¡ç†åœ°å€\n   - æ”¯æŒæ ¼å¼ï¼š\n     - `http://192.168.1.1`\n     - `192.168.1.1`ï¼ˆè‡ªåŠ¨æ·»åŠ  http://ï¼‰\n     - `https://192.168.10.1:8080`\n\n2. **è°ƒæ•´å¹¶å‘è®¾ç½®**\n   - é»˜è®¤ 50 å¹¶å‘ï¼Œå¯æ ¹æ®ç½‘ç»œæƒ…å†µè°ƒæ•´ï¼ˆ1-500ï¼‰\n   - å¹¶å‘æ•°è¶Šé«˜ï¼Œæ¢æµ‹é€Ÿåº¦è¶Šå¿«ï¼Œä½†å ç”¨èµ„æºè¶Šå¤š\n\n3. **å¼€å§‹æ¢æµ‹**\n   - ç‚¹å‡» \"â–¶ å¼€å§‹æ¢æµ‹\" æŒ‰é’®\n   - å‘¼å¸ç¯å˜ä¸ºç»¿è‰²å¹¶é—ªçƒ\n   - è¡¨æ ¼å®æ—¶æ˜¾ç¤ºæ¢æµ‹ç»“æœ\n\n4. **æŸ¥çœ‹ç»“æœ**\n   - âœ… **ç»¿è‰²èƒŒæ™¯**ï¼šç™»å½•æˆåŠŸ\n   - âŒ **çº¢è‰²èƒŒæ™¯**ï¼šç™»å½•å¤±è´¥/è¶…æ—¶/æ— æ³•è¿æ¥\n   - æˆåŠŸçš„è¡Œä¼šæ˜¾ç¤ºåŒ¹é…çš„è´¦å·å’Œå¯†ç \n\n5. **å¯¼å‡ºç»“æœ**\n   - æ¢æµ‹å®Œæˆåï¼Œç‚¹å‡» \"ğŸ’¾ å¯¼å‡ºä¸º CSV\"\n   - é€‰æ‹©ä¿å­˜ä½ç½®å³å¯\n\n---\n\n## ğŸ”‘ é»˜è®¤å‡­è¯ç­–ç•¥\n\nç¨‹åºä¼šæŒ‰ä»¥ä¸‹é¡ºåºå°è¯•å‡­è¯ï¼ˆå¯åœ¨ä»£ç ä¸­ä¿®æ”¹ `CREDENTIALS_LIST`ï¼‰ï¼š\n\n| ä¼˜å…ˆçº§ | ç”¨æˆ·å | å¯†ç      |\n|--------|--------|----------|\n| 1      | root   | password |\n| 2      | root   | admin    |\n| 3      | admin  | admin    |\n| 4      | ubnt   | ubnt     |\n| 5      | root   | 123456   |\n\n---\n\n## ğŸ“¦ æ‰“åŒ…ä¸ºå¯æ‰§è¡Œæ–‡ä»¶\n\nä½¿ç”¨ PyInstaller æ‰“åŒ…ä¸ºå•æ–‡ä»¶ `.exe`ï¼ˆWindowsï¼‰ï¼š\n\n```bash\n# å®‰è£… PyInstaller\npip install pyinstaller\n\n# æ‰“åŒ…ä¸ºå•æ–‡ä»¶\npyinstaller --onefile --windowed --name \"OpenWrtç®¡ç†åŠ©æ‰‹\" openwrt_manager.py\n```\n\næ‰“åŒ…åçš„æ–‡ä»¶ä½äº `dist/` ç›®å½•ã€‚\n\n---\n\n## âš™ï¸ æŠ€æœ¯æ¶æ„\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚          PyQt6 GUI ï¼ˆä¸»çº¿ç¨‹ï¼‰            â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\nâ”‚  â”‚  å·¦ä¾§æ§åˆ¶åŒº  â”‚       â”‚  å³ä¾§ç»“æœåŒº  â”‚ â”‚\nâ”‚  â”‚  - URLè¾“å…¥  â”‚       â”‚  - ç»“æœè¡¨æ ¼  â”‚ â”‚\nâ”‚  â”‚  - å¹¶å‘è®¾ç½®  â”‚       â”‚  - å®æ—¶æ›´æ–°  â”‚ â”‚\nâ”‚  â”‚  - æ§åˆ¶æŒ‰é’®  â”‚       â”‚  - é¢œè‰²æ ‡è®°  â”‚ â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                â”‚ qasync æ¡¥æ¥\n                â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚       asyncio äº‹ä»¶å¾ªç¯ï¼ˆå¼‚æ­¥ï¼‰          â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚      LoginManager                â”‚   â”‚\nâ”‚  â”‚  - Semaphore(50) å¹¶å‘æ§åˆ¶        â”‚   â”‚\nâ”‚  â”‚  - aiohttp.ClientSession         â”‚   â”‚\nâ”‚  â”‚  - æ‰¹é‡å¼‚æ­¥ä»»åŠ¡è°ƒåº¦              â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### æ ¸å¿ƒæŠ€æœ¯ç‚¹ï¼š\n\n1. **qasync**ï¼šæ¡¥æ¥ asyncio å’Œ PyQt äº‹ä»¶å¾ªç¯ï¼Œé¿å…é˜»å¡ UI\n2. **aiohttp**ï¼šå¼‚æ­¥ HTTP å®¢æˆ·ç«¯ï¼Œé«˜æ€§èƒ½ç½‘ç»œè¯·æ±‚\n3. **asyncio.Semaphore**ï¼šæ§åˆ¶å¹¶å‘æ•°ï¼Œé˜²æ­¢èµ„æºè€—å°½\n4. **QPropertyAnimation**ï¼šå®ç°å‘¼å¸ç¯å¹³æ»‘åŠ¨ç”»\n5. **pyqtSignal**ï¼šçº¿ç¨‹å®‰å…¨çš„ UI æ›´æ–°æœºåˆ¶\n\n---\n\n## ğŸ›¡ï¸ å®‰å…¨è¯´æ˜\n\n> [!WARNING]\n> **SSL è¯ä¹¦éªŒè¯**\n> \n> æœ¬å·¥å…·é»˜è®¤**å¿½ç•¥ SSL è¯ä¹¦éªŒè¯** (`ssl=False`)ï¼Œä»¥æ”¯æŒè‡ªç­¾åè¯ä¹¦ã€‚\n> \n> è¯·ä»…åœ¨å—ä¿¡ä»»çš„å†…ç½‘ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œé¿å…åœ¨å…¬ç½‘ç¯å¢ƒä½¿ç”¨ã€‚\n\n---\n\n## ğŸ“ è®¸å¯è¯\n\næœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œè¯·å‹¿ç”¨äºéæ³•ç”¨é€”ã€‚\n\n---\n\n## ğŸ¤ è´¡çŒ®\n\næ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼\n\n---\n\n## ğŸ“ è”ç³»æ–¹å¼\n\nå¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ Issue åé¦ˆã€‚\n\n---\n\n<div align=\"center\">\n\n**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª Starï¼**\n\n</div>\n"}, {"path": "_backup_v2_pyqt/requirements.txt", "content": "PyQt6>=6.6.0\naiohttp>=3.9.0\nqasync>=0.24.0\nbeautifulsoup4>=4.12.0\nopenpyxl>=3.1.0\n"}, {"path": "_backup_v2_pyqt/TESTING.md", "content": "# æµ‹è¯•è¯´æ˜\n\n## æœ¬åœ°æµ‹è¯•ç¯å¢ƒå‡†å¤‡\n\n### æ–¹æ³• 1: ä½¿ç”¨æœ¬åœ° OpenWrt è™šæ‹Ÿæœºï¼ˆæ¨èï¼‰\n\nå¦‚æœä½ æœ‰ OpenWrt è™šæ‹Ÿæœºï¼Œå¯ä»¥ç›´æ¥æµ‹è¯•ï¼š\n\n1. ç¡®ä¿è™šæ‹Ÿæœºç½‘ç»œé…ç½®æ­£ç¡®\n2. è®°å½•è™šæ‹Ÿæœºçš„ IP åœ°å€ï¼ˆä¾‹å¦‚ `192.168.1.1`ï¼‰\n3. åœ¨ç¨‹åºä¸­è¾“å…¥è¯¥ IP è¿›è¡Œæµ‹è¯•\n\n### æ–¹æ³• 2: ä½¿ç”¨æµ‹è¯•æœåŠ¡å™¨æ¨¡æ‹Ÿï¼ˆå¼€å‘æµ‹è¯•ï¼‰\n\nåˆ›å»ºä¸€ä¸ªç®€å•çš„ Flask æœåŠ¡å™¨æ¥æ¨¡æ‹Ÿ OpenWrt LuCI ç™»å½•è¡Œä¸ºã€‚\n\n#### æµ‹è¯•æœåŠ¡å™¨ä»£ç ï¼ˆtest_server.pyï¼‰\n\n```python\nfrom flask import Flask, request, make_response, redirect\n\napp = Flask(__name__)\n\n# æ¨¡æ‹Ÿçš„æœ‰æ•ˆå‡­è¯\nVALID_CREDENTIALS = {\n    \"root\": \"password\"\n}\n\n@app.route('/cgi-bin/luci', methods=['GET', 'POST'])\ndef luci_login():\n    if request.method == 'POST':\n        username = request.form.get('luci_username')\n        password = request.form.get('luci_password')\n        \n        print(f\"[æµ‹è¯•æœåŠ¡å™¨] æ”¶åˆ°ç™»å½•è¯·æ±‚: {username} / {password}\")\n        \n        # æ£€æŸ¥å‡­è¯\n        if username in VALID_CREDENTIALS and VALID_CREDENTIALS[username] == password:\n            print(f\"[æµ‹è¯•æœåŠ¡å™¨] âœ… ç™»å½•æˆåŠŸ\")\n            # æ¨¡æ‹ŸæˆåŠŸ - è¿”å› 302 å¹¶è®¾ç½® sysauth Cookie\n            response = make_response(redirect('/'))\n            response.set_cookie('sysauth', 'test_token_12345')\n            return response\n        else:\n            print(f\"[æµ‹è¯•æœåŠ¡å™¨] âŒ ç™»å½•å¤±è´¥\")\n            # æ¨¡æ‹Ÿå¤±è´¥ - è¿”å› 403\n            return \"Login failed\", 403\n    \n    return \"OpenWrt Login Test Server\", 200\n\nif __name__ == '__main__':\n    print(\"ğŸš€ å¯åŠ¨æµ‹è¯•æœåŠ¡å™¨...\")\n    print(\"ğŸ“ è®¿é—®åœ°å€: http://127.0.0.1:5000\")\n    print(\"âœ… æœ‰æ•ˆå‡­è¯: root / password\")\n    app.run(host='0.0.0.0', port=5000, debug=True)\n```\n\n#### è¿è¡Œæµ‹è¯•æœåŠ¡å™¨\n\n1. å®‰è£… Flask:\n   ```bash\n   pip install flask\n   ```\n\n2. è¿è¡ŒæœåŠ¡å™¨:\n   ```bash\n   python test_server.py\n   ```\n\n3. åœ¨ OpenWrt ç®¡ç†åŠ©æ‰‹ä¸­è¾“å…¥:\n   ```\n   http://127.0.0.1:5000\n   ```\n\n---\n\n## åŠŸèƒ½æµ‹è¯•æ¸…å•\n\n### âœ… UI ç•Œé¢æµ‹è¯•\n\n- [ ] ä¸»çª—å£æ­£å¸¸æ˜¾ç¤º\n- [ ] å·¦å³åˆ†æ æ¯”ä¾‹æ­£ç¡®ï¼ˆ30% / 70%ï¼‰\n- [ ] URL è¾“å…¥æ¡†æœ‰ placeholder æç¤º\n- [ ] å¹¶å‘æ•°è°ƒæ•´æ¡†é»˜è®¤å€¼ä¸º 50\n- [ ] å¼€å§‹æŒ‰é’®æ˜¾ç¤ºç»¿è‰²\n- [ ] å‘¼å¸ç¯æ˜¾ç¤ºç°è‰²\n- [ ] è¡¨æ ¼åˆ—æ ‡é¢˜æ­£ç¡®æ˜¾ç¤º\n\n### âœ… åŸºæœ¬åŠŸèƒ½æµ‹è¯•\n\n- [ ] è¾“å…¥å•ä¸ª URL å¹¶æ¢æµ‹\n- [ ] è¾“å…¥å¤šä¸ª URL å¹¶æ¢æµ‹\n- [ ] ç‚¹å‡»\"åœæ­¢\"æŒ‰é’®èƒ½ä¸­æ–­æ¢æµ‹\n- [ ] è°ƒæ•´å¹¶å‘æ•°åç”Ÿæ•ˆ\n- [ ] æ¢æµ‹å®Œæˆåæ˜¾ç¤ºå®Œæˆæç¤º\n\n### âœ… å‘¼å¸ç¯åŠ¨ç”»æµ‹è¯•\n\n- [ ] æ¢æµ‹å‰ï¼šç°è‰²é™æ­¢\n- [ ] æ¢æµ‹ä¸­ï¼šç»¿è‰²å‘¼å¸é—ªçƒ\n- [ ] æ¢æµ‹åï¼šæ¢å¤ç°è‰²é™æ­¢\n\n### âœ… è¡¨æ ¼é¢œè‰²æ ‡è®°æµ‹è¯•\n\n- [ ] ç™»å½•æˆåŠŸï¼šæµ…ç»¿è‰²èƒŒæ™¯\n- [ ] ç™»å½•å¤±è´¥ï¼šæµ…çº¢è‰²èƒŒæ™¯\n- [ ] è¿æ¥è¶…æ—¶ï¼šæµ…çº¢è‰²èƒŒæ™¯\n- [ ] æ— æ³•è¿æ¥ï¼šæµ…çº¢è‰²èƒŒæ™¯\n\n### âœ… å¼‚æ­¥æ€§èƒ½æµ‹è¯•\n\n- [ ] æ¢æµ‹ 10 ä¸ªç›®æ ‡æ—¶ç•Œé¢ä¸å¡é¡¿\n- [ ] æ¢æµ‹ 50 ä¸ªç›®æ ‡æ—¶ç•Œé¢ä¸å¡é¡¿\n- [ ] æ¢æµ‹ 100 ä¸ªç›®æ ‡æ—¶ç•Œé¢ä¸å¡é¡¿\n- [ ] ç»Ÿè®¡ä¿¡æ¯å®æ—¶æ›´æ–°\n\n### âœ… CSV å¯¼å‡ºæµ‹è¯•\n\n- [ ] å¯¼å‡ºæŒ‰é’®åœ¨æ¢æµ‹å‰ç¦ç”¨\n- [ ] å¯¼å‡ºæŒ‰é’®åœ¨æ¢æµ‹åå¯ç”¨\n- [ ] å¯¼å‡ºçš„ CSV æ–‡ä»¶åŒ…å«æ­£ç¡®çš„åˆ—\n- [ ] å¯¼å‡ºçš„ CSV æ–‡ä»¶å¯ä»¥ç”¨ Excel æ‰“å¼€\n- [ ] ä¸­æ–‡å†…å®¹æ— ä¹±ç \n\n### âœ… å¼‚å¸¸å¤„ç†æµ‹è¯•\n\n- [ ] è¾“å…¥æ— æ•ˆ IP åœ°å€ï¼ˆå¦‚ `999.999.999.999`ï¼‰\n- [ ] è¾“å…¥ä¸å­˜åœ¨çš„åŸŸåï¼ˆå¦‚ `http://nonexistent.example`ï¼‰\n- [ ] ç½‘ç»œæ–­å¼€æ—¶çš„è¡Œä¸º\n- [ ] ç›®æ ‡è®¾å¤‡å…³æœºæ—¶çš„è¡Œä¸º\n\n---\n\n## æ€§èƒ½æµ‹è¯•\n\n### å¹¶å‘æµ‹è¯•\n\næµ‹è¯•ä¸åŒå¹¶å‘æ•°ä¸‹çš„æ€§èƒ½ï¼š\n\n| å¹¶å‘æ•° | ç›®æ ‡æ•°é‡ | å®é™…è€—æ—¶ | UI æ˜¯å¦æµç•… | å¤‡æ³¨ |\n|--------|----------|----------|-------------|------|\n| 10     | 50       |          | âœ… / âŒ      |      |\n| 50     | 100      |          | âœ… / âŒ      |      |\n| 100    | 200      |          | âœ… / âŒ      |      |\n| 200    | 500      |          | âœ… / âŒ      |      |\n\n### å¤§è§„æ¨¡æµ‹è¯•\n\n- [ ] æµ‹è¯• 500 ä¸ªç›®æ ‡\n- [ ] æµ‹è¯• 1000 ä¸ªç›®æ ‡\n- [ ] è®°å½•å†…å­˜å ç”¨æƒ…å†µ\n- [ ] è®°å½• CPU å ç”¨æƒ…å†µ\n\n---\n\n## å·²çŸ¥é™åˆ¶\n\n1. **CSRF Token**: æŸäº›æ–°ç‰ˆ OpenWrt å¯èƒ½éœ€è¦å…ˆè·å– CSRF Tokenï¼Œå½“å‰ç‰ˆæœ¬ä¼šæ ‡è®°\"éœ€ Token\"ä½†ä¸ä¼šè‡ªåŠ¨å¤„ç†\n2. **HTTPS è¯ä¹¦**: å¿½ç•¥äº† SSL è¯ä¹¦éªŒè¯ï¼Œä»…é€‚ç”¨äºå†…ç½‘ç¯å¢ƒ\n3. **å¹¶å‘é™åˆ¶**: è™½ç„¶æ”¯æŒæœ€é«˜ 500 å¹¶å‘ï¼Œä½†å®é™…å—é™äºç³»ç»Ÿèµ„æº\n\n---\n\n## ä¸‹ä¸€æ­¥ä¼˜åŒ–æ–¹å‘\n\n1. æ”¯æŒè‡ªå®šä¹‰ç™»å½•è·¯å¾„\n2. æ”¯æŒ CSRF Token è‡ªåŠ¨è·å–\n3. æ”¯æŒå¤šç§ç™»å½•åè®®ï¼ˆSSHã€Telnet ç­‰ï¼‰\n4. æ”¯æŒä»æ–‡ä»¶å¯¼å…¥ç›®æ ‡åˆ—è¡¨\n5. æ”¯æŒå®šæ—¶ä»»åŠ¡å’Œè‡ªåŠ¨æ¢æµ‹\n6. æ”¯æŒç»“æœè¿‡æ»¤å’Œæœç´¢\n\n---\n\n## æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿\n\n```\næµ‹è¯•æ—¶é—´: ________\næµ‹è¯•äººå‘˜: ________\n\nç¯å¢ƒä¿¡æ¯:\n- æ“ä½œç³»ç»Ÿ: ________\n- Python ç‰ˆæœ¬: ________\n- ä¾èµ–åº“ç‰ˆæœ¬: ________\n\næµ‹è¯•ç»“æœ:\n- UI ç•Œé¢: âœ… / âŒ\n- åŸºæœ¬åŠŸèƒ½: âœ… / âŒ\n- å‘¼å¸ç¯åŠ¨ç”»: âœ… / âŒ\n- é¢œè‰²æ ‡è®°: âœ… / âŒ\n- å¼‚æ­¥æ€§èƒ½: âœ… / âŒ\n- CSV å¯¼å‡º: âœ… / âŒ\n- å¼‚å¸¸å¤„ç†: âœ… / âŒ\n\nå‘ç°çš„é—®é¢˜:\n1. ________\n2. ________\n\nå»ºè®®æ”¹è¿›:\n1. ________\n2. ________\n```\n"}]