# OpenWrt 批量资产管理助手

<div align="center">

📡 **一款基于 PyQt6 的 OpenWrt 设备批量登录探测工具**

支持 1000+ 设备并发探测 | 异步高性能 | 界面流畅

</div>

---

## ✨ 功能特性

- 🚀 **高性能异步并发**：使用 `aiohttp` + `asyncio` 实现异步网络请求，支持 1000+ 设备同时探测
- 🎯 **智能凭证探测**：自动尝试多组常用凭证（root/password、admin/admin 等）
- 💡 **呼吸灯动画**：实时显示探测状态，运行时呼吸闪烁
- 📊 **实时结果展示**：表格实时更新，成功/失败状态颜色标记
- 💾 **CSV 导出**：一键导出探测结果，方便后续处理
- 🔒 **安全设置**：自动忽略 SSL 证书验证，支持自签名证书
- ⚙️ **可调并发数**：1-500 可调，默认 50 并发

---

## 📋 系统要求

- **操作系统**：Windows / macOS / Linux
- **Python 版本**：Python 3.8+
- **依赖库**：
  - PyQt6 >= 6.6.0
  - aiohttp >= 3.9.0
  - qasync >= 0.24.0

---

## 🛠️ 安装步骤

### 1️⃣ 克隆或下载项目

```bash
git clone <repository-url>
cd openwrt-manager
```

### 2️⃣ 安装依赖

```bash
pip install -r requirements.txt
```

### 3️⃣ 运行程序

```bash
python openwrt_manager.py
```

---

## 🎮 使用说明

### 基本操作流程

1. **输入目标地址**
   - 在左侧文本框中，每行输入一个 OpenWrt 管理地址
   - 支持格式：
     - `http://192.168.1.1`
     - `192.168.1.1`（自动添加 http://）
     - `https://192.168.10.1:8080`

2. **调整并发设置**
   - 默认 50 并发，可根据网络情况调整（1-500）
   - 并发数越高，探测速度越快，但占用资源越多

3. **开始探测**
   - 点击 "▶ 开始探测" 按钮
   - 呼吸灯变为绿色并闪烁
   - 表格实时显示探测结果

4. **查看结果**
   - ✅ **绿色背景**：登录成功
   - ❌ **红色背景**：登录失败/超时/无法连接
   - 成功的行会显示匹配的账号和密码

5. **导出结果**
   - 探测完成后，点击 "💾 导出为 CSV"
   - 选择保存位置即可

---

## 🔑 默认凭证策略

程序会按以下顺序尝试凭证（可在代码中修改 `CREDENTIALS_LIST`）：

| 优先级 | 用户名 | 密码     |
|--------|--------|----------|
| 1      | root   | password |
| 2      | root   | admin    |
| 3      | admin  | admin    |
| 4      | ubnt   | ubnt     |
| 5      | root   | 123456   |

---

## 📦 打包为可执行文件

使用 PyInstaller 打包为单文件 `.exe`（Windows）：

```bash
# 安装 PyInstaller
pip install pyinstaller

# 打包为单文件
pyinstaller --onefile --windowed --name "OpenWrt管理助手" openwrt_manager.py
```

打包后的文件位于 `dist/` 目录。

---

## ⚙️ 技术架构

```
┌─────────────────────────────────────────┐
│          PyQt6 GUI （主线程）            │
│  ┌─────────────┐       ┌──────────────┐ │
│  │  左侧控制区  │       │  右侧结果区  │ │
│  │  - URL输入  │       │  - 结果表格  │ │
│  │  - 并发设置  │       │  - 实时更新  │ │
│  │  - 控制按钮  │       │  - 颜色标记  │ │
│  └─────────────┘       └──────────────┘ │
└───────────────┬─────────────────────────┘
                │ qasync 桥接
                ▼
┌─────────────────────────────────────────┐
│       asyncio 事件循环（异步）          │
│  ┌──────────────────────────────────┐   │
│  │      LoginManager                │   │
│  │  - Semaphore(50) 并发控制        │   │
│  │  - aiohttp.ClientSession         │   │
│  │  - 批量异步任务调度              │   │
│  └──────────────────────────────────┘   │
└─────────────────────────────────────────┘
```

### 核心技术点：

1. **qasync**：桥接 asyncio 和 PyQt 事件循环，避免阻塞 UI
2. **aiohttp**：异步 HTTP 客户端，高性能网络请求
3. **asyncio.Semaphore**：控制并发数，防止资源耗尽
4. **QPropertyAnimation**：实现呼吸灯平滑动画
5. **pyqtSignal**：线程安全的 UI 更新机制

---

## 🛡️ 安全说明

> [!WARNING]
> **SSL 证书验证**
> 
> 本工具默认**忽略 SSL 证书验证** (`ssl=False`)，以支持自签名证书。
> 
> 请仅在受信任的内网环境中使用，避免在公网环境使用。

---

## 📝 许可证

本项目仅供学习和研究使用，请勿用于非法用途。

---

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

---

## 📞 联系方式

如有问题或建议，请通过 Issue 反馈。

---

<div align="center">

**⭐ 如果这个项目对你有帮助，请给一个 Star！**

</div>
