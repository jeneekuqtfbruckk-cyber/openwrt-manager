[{"path": "frontend/.gitignore", "content": "# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.\n\n# dependencies\n/node_modules\n\n# next.js\n/.next/\n/out/\n\n# production\n/build\n\n# debug\nnpm-debug.log*\nyarn-debug.log*\nyarn-error.log*\n.pnpm-debug.log*\n\n# env files\n.env*\n\n# vercel\n.vercel\n\n# typescript\n*.tsbuildinfo\nnext-env.d.ts"}, {"path": "frontend/components.json", "content": "{\n  \"$schema\": \"https://ui.shadcn.com/schema.json\",\n  \"style\": \"new-york\",\n  \"rsc\": true,\n  \"tsx\": true,\n  \"tailwind\": {\n    \"config\": \"\",\n    \"css\": \"app/globals.css\",\n    \"baseColor\": \"neutral\",\n    \"cssVariables\": true,\n    \"prefix\": \"\"\n  },\n  \"aliases\": {\n    \"components\": \"@/components\",\n    \"utils\": \"@/lib/utils\",\n    \"ui\": \"@/components/ui\",\n    \"lib\": \"@/lib\",\n    \"hooks\": \"@/hooks\"\n  },\n  \"iconLibrary\": \"lucide\"\n}\n"}, {"path": "frontend/main.js", "content": "const { app, BrowserWindow } = require('electron');\nconst path = require('path');\nconst { spawn } = require('child_process');\nconst http = require('http');\n\nlet mainWindow;\nlet pythonProcess;\n\nfunction createWindow() {\n    mainWindow = new BrowserWindow({\n        width: 1200,\n        height: 800,\n        titleBarStyle: 'hidden', // macOS style traffic lights\n        title: \"OpenWrt Manager\",\n        webPreferences: {\n            nodeIntegration: true,\n            contextIsolation: false,\n        },\n        frame: false, // Frameless for Windows\n        transparent: true, // Enable transparency\n    });\n\n    // Load Next.js dev server or static build\n    if (app.isPackaged) {\n        mainWindow.loadFile(path.join(__dirname, 'out', 'index.html'));\n    } else {\n        const startUrl = process.env.ELECTRON_START_URL || 'http://localhost:3000';\n        setTimeout(() => {\n            mainWindow.loadURL(startUrl);\n        }, 1000);\n    }\n\n    mainWindow.on('closed', function () {\n        mainWindow = null;\n    });\n}\n\nfunction startBackend() {\n    // Spawn Python FastAPI Backend\n    let cmd;\n    let args;\n    let cwd;\n\n    if (app.isPackaged) {\n        // In release, backend.exe is placed in resources/ (by electron-builder extraResources)\n        const exePath = path.join(process.resourcesPath, 'backend.exe');\n        console.log('Spawning Packaged Backend:', exePath);\n        cmd = exePath;\n        args = [];\n        // Optional: set cwd to resources path or let it be default\n        cwd = process.resourcesPath;\n    } else {\n        // In dev, use the batch file\n        const batchPath = path.join(__dirname, '..', 'backend', 'run_server.bat');\n        console.log('Spawning Backend via Batch:', batchPath);\n        cmd = 'cmd.exe';\n        args = ['/c', batchPath];\n        cwd = path.join(__dirname, '..', 'backend');\n    }\n\n    pythonProcess = spawn(cmd, args, {\n        cwd: cwd,\n        stdio: 'inherit',\n        shell: false,\n        env: process.env\n    });\n\n    // pythonProcess.stderr is null because of stdio: 'inherit'\n    // Errors will appear directly in the console\n}\n\n// App Lifecycle\napp.disableHardwareAcceleration(); // Fix for GPU crashes on some Windows systems\napp.on('ready', () => {\n    startBackend();\n    createWindow();\n});\n\napp.on('window-all-closed', function () {\n    if (process.platform !== 'darwin') {\n        app.quit();\n    }\n});\n\napp.on('activate', function () {\n    if (mainWindow === null) {\n        createWindow();\n    }\n});\n\napp.on('will-quit', () => {\n    // Kill Python subprocess\n    if (pythonProcess) {\n        pythonProcess.kill();\n    }\n});\n"}, {"path": "frontend/next-env.d.ts", "content": "/// <reference types=\"next\" />\n/// <reference types=\"next/image-types/global\" />\nimport \"./.next/types/routes.d.ts\";\n\n// NOTE: This file should not be edited\n// see https://nextjs.org/docs/app/api-reference/config/typescript for more information.\n"}, {"path": "frontend/next.config.mjs", "content": "/** @type {import('next').NextConfig} */\nconst nextConfig = {\n  output: 'export',\n  typescript: {\n    ignoreBuildErrors: true,\n  },\n  images: {\n    unoptimized: true,\n  },\n}\n\nexport default nextConfig\n"}]